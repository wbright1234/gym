(this.webpackJsonpgym=this.webpackJsonpgym||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/login-right.3930d683.png"},139:function(e,t,a){e.exports=a.p+"static/media/mail.857a6c24.svg"},140:function(e,t,a){e.exports=a.p+"static/media/building.f3cb86f1.svg"},141:function(e,t,a){e.exports=a.p+"static/media/check-circle.8550d38a.svg"},231:function(e,t,a){e.exports=a.p+"static/media/calendar-grey.df3f9cb5.svg"},232:function(e,t,a){e.exports=a.p+"static/media/cancel.e9c815eb.svg"},318:function(e,t){},328:function(e,t,a){e.exports=a(836)},337:function(e,t,a){},339:function(e,t,a){},35:function(e,t,a){e.exports=a.p+"static/media/homepage-logo.64215d19.png"},450:function(e,t,a){e.exports=a.p+"static/media/user.178a3833.svg"},451:function(e,t,a){e.exports=a.p+"static/media/smartphone.6d5a4336.svg"},460:function(e,t,a){e.exports=a.p+"static/media/homepage-top-right-line.c7e12310.png"},461:function(e,t,a){e.exports=a.p+"static/media/homepage-calendar.3fc0d375.png"},462:function(e,t,a){e.exports=a.p+"static/media/homepage-bottom-left.c515f57e.png"},463:function(e,t,a){e.exports=a.p+"static/media/avatar.6b81faf2.svg"},486:function(e,t,a){e.exports=a.p+"static/media/calendar-blue.a0335ee1.svg"},487:function(e,t,a){e.exports=a.p+"static/media/menu-blue.1ddcad88.svg"},488:function(e,t,a){e.exports=a.p+"static/media/menu.34bda4c1.svg"},826:function(e,t,a){e.exports=a.p+"static/media/plus.56f0e7e9.svg"},827:function(e,t,a){e.exports=a.p+"static/media/remove.12333ffe.svg"},829:function(e,t,a){e.exports=a.p+"static/media/stripe_subscription_left.d35efd12.svg"},830:function(e,t,a){e.exports=a.p+"static/media/stripe_subscription_right.9902eafd.svg"},831:function(e,t,a){e.exports=a.p+"static/media/card.285a430a.svg"},832:function(e,t,a){e.exports=a.p+"static/media/paypal.2d52b484.svg"},836:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),o=a.n(s),l=a(18),i=a(299),c=a(864),m=(a(337),a(338),a(339),a(340),a(341),a(25)),d=a(11),u=a(12),p=a(13),g=a(14),h=a(838),f=a(839),b=a(840),E=a(841),v=a(842),y=a(843),N=a(844),S=a(845),k=a(303),w=a(846),C=a(847),x=a(848),O=a(9),I=a.n(O),D=a(82),M=a(57),j=a.n(M),B=a(83),T=a(34),P=a(192),A=a.n(P),R=a(126),_=a.n(R),L=a(16),U=a.n(L),V=a(301),H=a(54),W=Object(H.a)(),Y=a(8),F=a.n(Y),q=a(302);a.n(q).a.config();var z="",G=A.a.create({baseURL:"http://localhost:30002",timeout:3e4}),K=A.a.create({baseURL:"http://localhost:30002",timeout:12e4});G.interceptors.request.use((function(e){return Object(T.a)({},e,{headers:Object(T.a)({},e.headers,{"Content-Type":"application/json"})})}),(function(e){return Promise.reject(e)})),K.interceptors.request.use(function(){var e=Object(B.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=U.a.get("refreshToken"),z||a){e.next=3;break}return e.abrupt("return",Promise.reject("Access token cannot be null"));case 3:if(!_()(a)||z){e.next=7;break}return e.next=6,J();case 6:z=e.sent.data.accessToken;case 7:if(_()(z)){e.next=9;break}return e.abrupt("return",Promise.reject("Access token is invalid"));case 9:if(!$(z)){e.next=13;break}return e.next=12,J();case 12:z=e.sent.data.accessToken;case 13:return n="uploadCertificate"===t.url?"multipart/form-data":"application/json",r={authorization:"Bearer "+z,"Content-Type":n},e.abrupt("return",Object(T.a)({},t,{headers:Object(T.a)({},t.headers,{},r)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var $=function(e){return 1e3*Object(V.a)(e).exp<=Date.now()},J=function(){return new Promise((function(e,t){var a=U.a.get("refreshToken");G.post("token",{refreshToken:a}).then((function(t){e(t.data)})).catch((function(e){console.log("New Token err: ",e),t(e)}))}))};K.interceptors.response.use((function(e){return e}),(function(e){e.response&&(console.log(e.response),405===e.response.status&&(U.a.set("isLoggedIn",!1),U.a.set("refreshToken",null),U.a.set("email",null),U.a.set("password",null),W.push("/")));return Promise.reject(e)}));var Q=new function e(){var t=this;Object(d.a)(this,e),this.setAccessToken=function(e){return z=e},this.getAccessToken=function(){return z},this.shareholderRegister=function(e){return G.post("shareholderRegister",e)},this.adminRegister=function(e){return G.post("adminRegister",e)},this.confirmPhoneVerification=function(e){return G.post("confirmPhoneVerification",e)},this.userLogin=function(e){return G.post("userLogin",e)},this.getBuildings=function(){return G.post("getBuildings")},this.getSubscriptionOptions=function(){return G.post("getSubscriptionOptions")},this.getPendingRegistrations=function(e){return K.post("getPendingRegistrations",e)},this.acceptRegistration=function(e){return K.post("acceptRegistration",e)},this.rejectRegistration=function(e){return K.post("rejectRegistration",e)},this.getUserInfo=function(){return K.get("getUserInfo")},this.editApartment=function(e){return K.post("editApartment",e)},this.deleteApartment=function(e){return K.delete("deleteApartment",{params:e})},this.getBookings=function(e){return K.get("getBookings",{params:e})},this.saveBooking=function(e){return K.post("saveBooking",e)},this.cancelBooking=function(e){return K.delete("cancelBooking",{params:e})},this.getBookingsAtMonth=function(e){return K.get("getBookingsAtMonth",{params:e})},this.getBookedTimeSlots=function(e){return K.get("getBookedTimeSlots",{params:e})},this.getDoormen=function(e){return K.post("getDoormen",e)},this.addDoorman=function(e){return K.post("addDoorman",e)},this.cancelDoorman=function(e){return K.delete("cancelDoorman",{params:e})},this.getApartments=function(e){return K.post("getApartments",e)},this.saveBookDateLimit=function(e){return K.post("saveBookDateLimit",e)},this.saveTimeSlots=function(e){return K.post("saveTimeSlots",e)},this.getTimeSlots=function(e){return K.post("getTimeSlots",e)},this.createStripeCustomer=function(e){return G.post("createStripeCustomer",e)},this.deleteStripeCustomer=function(e){return K.delete("deleteStripeCustomer",{data:e})},this.createStripeSubscription=function(e){return G.post("createStripeSubscription",e)},this.retrySubscriptionInvoice=function(e){return G.post("retrySubscriptionInvoice",e)},this.updateSubscriptionStatus=function(e){return G.post("updateSubscriptionStatus",e)},this.updateStripeSubscription=function(e){return K.post("updateStripeSubscription",e)},this.cancelSubscription=function(e){return K.delete("cancelSubscription",{data:e})},this.createFormData=function(e){var t=new FormData;return F.a.forEach(e,(function(e,a){t.append(a,e)})),t},this.uploadCertificate=function(e,a){return K.post("uploadCertificate",t.createFormData(e),{onUploadProgress:a})},this.resetPassword=function(e){return G.post("resetPassword",e)},this.storePassword=function(e){return G.post("storePassword",e)},this.userSignout=function(){return K.delete("userSignout",{params:{refreshToken:U.a.get("refreshToken")}})}},X=a(45),Z=a.n(X),ee=a(26),te=a(324),ae=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onGetBuildings=function(){Q.getBuildings().then((function(e){var t=e.data.data;a.setState({buildings:[].concat(Object(m.a)(a.state.buildings),Object(m.a)(t))})}))},a.onSignUp=function(){var e=a.state,t=e.name,n=e.email,r=e.password,s=e.phoneNumber,o=e.aptNumber,l=e.agreePolicy,i=e.accountType,c=e.buildingName,m=e.registrationCapacity,d=e.buildingId,u=e.recaptcha;if(t)if(n&&Object(X.isEmail)(n))if(r)if(s&&Object(X.isMobilePhone)(s)){if(1===i){if(0===d)return void a.setState({alert:{type:"danger",message:"Invalid building"}});if(!o)return void a.setState({alert:{type:"danger",message:"Invalid apartment number"}})}else if(0===i){if(!c)return void a.setState({alert:{type:"danger",message:"Invalid building name"}});if(!m||0===m||!Object(X.isNumeric)(m))return void a.setState({alert:{type:"danger",message:"Invalid building registration capactiy"}})}if(l)if(u){if(1===i){a.setState({isRegistering:!0,alert:{type:"",message:""}});var p={name:t,email:n,password:r,phoneNumber:s,aptNumber:o,buildingId:d,role:"shareholder"};Q.shareholderRegister(p).then((function(e){var r=e.data.userId;p={userId:r,email:n,name:t},Q.createStripeCustomer(p).then((function(e){var t=e.data.data.id;a.setState({isRegistering:!1,doneSignUp:!0}),a.props.history.push("/signup-phone-confirm",{admin:!1,userId:r,stripeCustomerId:t})}))})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({isRegistering:!1,alert:{type:"danger",message:t}})}))}else if(0===i){a.setState({isRegistering:!0,alert:{type:"",message:""}});var g={name:t,email:n,password:r,phoneNumber:s,buildingName:c,registrationCapacity:m,role:"admin"};Q.adminRegister(g).then((function(e){a.setState({isRegistering:!1,doneSignUp:!0}),a.props.history.push("/signup-phone-confirm",{admin:!0,userId:e.data.userId})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({isRegistering:!1,alert:{type:"danger",message:t}})}))}}else a.setState({alert:{type:"danger",message:"You must check you are not robot"}});else a.setState({alert:{type:"danger",message:"You must agree terms of service and privacy policy"}})}else a.setState({alert:{type:"danger",message:"Invalid phone number"}});else a.setState({alert:{type:"danger",message:"Invalid password"}});else a.setState({alert:{type:"danger",message:"Invalid email"}});else a.setState({alert:{type:"danger",message:"Invalid name"}})},a.renderBuildingOptions=function(){var e=a.state.buildings,t=[];return t.push(r.a.createElement("option",{key:0,value:0},"Select building")),e.map((function(e){t.push(r.a.createElement("option",{key:e.adminId,value:e.id},e.buildingName))})),t},a.recaptchaRef=r.a.createRef(),a.state={alert:{type:"",message:""},name:"",nameErr:"",email:"",emailErr:"",password:"",passwordErr:"",phoneNumber:"",phoneNumberErr:"",aptNumber:"",aptNumberErr:"",buildingName:"",buildingNameErr:"",registrationCapacity:"",registrationCapacityErr:"",agreePolicy:!1,isRegistering:!1,doneSignUp:!1,accountType:0,buildingId:0,buildingError:"",buildings:[],recaptcha:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.onGetBuildings()}},{key:"render",value:function(){var e=this,t=this.state,n=t.alert,s=t.name,o=t.nameErr,l=t.email,i=t.emailErr,c=t.password,m=t.passwordErr,d=t.phoneNumber,u=t.phoneNumberErr,p=t.aptNumber,g=t.aptNumberErr,O=t.agreePolicy,M=t.isRegistering,j=t.accountType,B=t.buildingName,T=t.buildingNameErr,P=t.registrationCapacity,A=t.registrationCapacityErr,R=t.buildingId,_=t.buildingError;return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(h.a,{className:"h-100"},r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill justify-content-center"},r.a.createElement("img",{alt:"...",src:a(99),className:"login-left-img"})),r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400}),r.a.createElement(b.a,{className:"d-flex flex-column align-items-center border-1 bg-white mt-4 "+(ee.isMobile?"w-90":"w-75")},r.a.createElement("h4",{className:"blue-tint text-bold mt-3"},"Sign Up"),r.a.createElement("h5",{className:"blue-tint mt-1"},"Create your Account"),r.a.createElement(E.a,{className:"w-90 mt-3"},r.a.createElement(I.a,{className:0===j?"bg-blue text-white border-0 w-50":"bg-white tint-color border-tint w-50",onClick:function(){e.setState({accountType:0})}},"Admin"),r.a.createElement(I.a,{className:1===j?"bg-blue text-white border-0 w-50":"bg-white tint-color border-tint w-50",onClick:function(){e.setState({accountType:1})}},"Shareholder")),r.a.createElement(v.a,{className:"w-90"},r.a.createElement(y.a,{className:"mt-3"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(450),width:20,height:20}))),r.a.createElement(w.a,{type:"email",placeholder:"Enter your name",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:s,onChange:function(t){return e.setState({name:t.target.value,nameErr:""})},invalid:!!o}))),r.a.createElement(C.a,null,o),r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(139),width:20,height:20}))),r.a.createElement(w.a,{type:"email",placeholder:"Enter your email",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:l,onChange:function(t){return e.setState({email:t.target.value,emailErr:""})},invalid:!!i}))),r.a.createElement(C.a,null,i),r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(90),width:20,height:20}))),r.a.createElement(w.a,{type:"password",placeholder:"Enter your password",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:c,onChange:function(t){return e.setState({password:t.target.value,passwordErr:""})},invalid:!!m}))),r.a.createElement(C.a,null,m),r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(451),width:20,height:20}))),r.a.createElement(w.a,{type:"tel",placeholder:"Enter your phone number",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:d,onChange:function(t){return e.setState({phoneNumber:t.target.value,phoneNumberErr:""})},invalid:!!u}))),r.a.createElement(C.a,null,u),1===j?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"mt-4"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 border-bottom-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(140),width:20,height:20}))),r.a.createElement(w.a,{type:"select",value:R,onChange:function(t){return e.setState({buildingId:t.target.value})},invalid:!!_},this.renderBuildingOptions()))),r.a.createElement(C.a,null,_),r.a.createElement(y.a,{className:"mt-4"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(90),width:20,height:20}))),r.a.createElement(w.a,{type:"text",placeholder:"Enter your apartment number",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:p,onChange:function(t){return e.setState({aptNumber:t.target.value,aptNumberErr:""})},invalid:!!g}))),r.a.createElement(C.a,null,g)):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"mt-4"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(140),width:20,height:20}))),r.a.createElement(w.a,{type:"text",placeholder:"Enter your building name",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:B,onChange:function(t){return e.setState({buildingName:t.target.value,buildingNameErr:""})},invalid:!!T}))),r.a.createElement(C.a,null,T),r.a.createElement(y.a,{className:"mt-4"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(140),width:20,height:20}))),r.a.createElement(w.a,{type:"text",placeholder:"Enter building registration capacity",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:P,onChange:function(t){return e.setState({registrationCapacity:t.target.value,registrationCapacityErr:""})},invalid:!!A}))),r.a.createElement(C.a,null,A))),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(te.a,{ref:this.recaptchaRef,sitekey:"6Lfi2t4ZAAAAAPhZ9i7b7XHumMALMomkDvdsncOo",onChange:function(t){e.setState({recaptcha:!0})}})),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(D.Checkbox,{theme:"bootstrap-checkbox",value:O,onChange:function(){return e.setState({agreePolicy:!e.state.agreePolicy})},children:r.a.createElement("span",null)}),r.a.createElement(ee.BrowserView,null,r.a.createElement("small",{className:"ml-2"},"I agree to the"),r.a.createElement("small",{className:"blue-tint"},r.a.createElement("a",{href:"/"},"\xa0Terms of Service")),r.a.createElement("small",null,"\xa0and"),r.a.createElement("small",{className:"blue-tint"},r.a.createElement("a",{href:"/"},"\xa0Privacy Policy"))),r.a.createElement(ee.MobileView,null,r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("small",{className:"ml-2"},"I agree to the"),r.a.createElement("small",{className:"blue-tint"},r.a.createElement("a",{href:"/"},"\xa0Terms of Service")),r.a.createElement("small",null,"\xa0and")),r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("small",{className:"blue-tint"},r.a.createElement("a",{href:"/"},"\xa0Privacy Policy"))))),n.message&&r.a.createElement(x.a,{color:n.type,className:"mt-3"},n.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 mt-3 py-2",loading:M,disabled:M,onClick:this.onSignUp},r.a.createElement("strong",null,"SIGN UP")),r.a.createElement("div",{className:"d-flex my-4"},r.a.createElement("h6",null,"Already have an account?"),r.a.createElement(I.a,{className:"bg-transparent border-0 shadow-none p-0",tag:"a",href:"/sign-in"},r.a.createElement("h6",{className:"mb-0 blue-tint"},r.a.createElement("strong",null,"\xa0Sign In"))))))),r.a.createElement("img",{alt:"...",src:a(100),className:"login-right-img"}))}}]),n}(r.a.Component),ne=a(868),re=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.toggle;return r.a.createElement(ne.a,{isOpen:t,toggle:n,centered:!0},r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400,className:"mt-5"}),r.a.createElement("img",{alt:"...",src:a(141),width:150,height:150,className:"mt-5"}),r.a.createElement("h4",{className:"mt-5 text-center mx-4"},"You will receive a confirmation email soon"),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 my-4 py-2",onClick:n},r.a.createElement("strong",null,"OK"))))}}]),n}(r.a.Component),se=a(865),oe=Object(se.a)({updateUser:function(e){return e}}).updateUser,le=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onSignIn=function(){var e=a.state,t=e.email,n=e.password,r=e.rememberMe;if(t&&Object(X.isEmail)(t))if(n){a.setState({isLoggingIn:!0,alert:{type:"",message:""}});var s={email:t,password:n};Q.userLogin(s).then((function(e){var s=e.data.data,o=s.accessToken,l=s.refreshToken,i=s.user;"doorman"===i.role||i.phone_verify?"shareholder"!==i.role||i.subscribedPlan?i.confirmed?(a.props.updateUser(i),a.setState({isLoggingIn:!1}),Q.setAccessToken(o),U.a.set("refreshToken",l),U.a.set("isLoggedIn",!0),r?(U.a.set("rememberMe",!0),U.a.set("email",t),U.a.set("password",n)):U.a.set("rememberMe",!1),a.props.history.push("/dashboard")):a.setState({waitingConfirmation:!0,isLoggingIn:!1}):a.props.history.push("/signup-subscription",{userId:i.id,stripeCustomerId:i.stripeCustomerId}):a.props.history.push("/signin-phone-confirm",{user:i,rememberMe:r,accessToken:o,refreshToken:l,email:t,password:n})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({alert:{type:"danger",message:t},isLoggingIn:!1})}))}else a.setState({passwordErr:"Invalid password"});else a.setState({emailErr:"Invalid email"})},a.state={alert:{type:"",message:""},email:"",emailErr:"",password:"",passwordErr:"",rememberMe:!1,waitingConfirmation:!1,isLoggingIn:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){U.a.get("rememberMe")&&this.setState({email:U.a.get("email"),password:U.a.get("password"),rememberMe:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.alert,s=t.email,o=t.emailErr,l=t.password,i=t.passwordErr,c=t.rememberMe,m=t.waitingConfirmation,d=t.isLoggingIn;return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(h.a,{className:"d-flex flex-fill",style:{margin:0}},r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill justify-content-center"},r.a.createElement("img",{alt:"...",src:a(99),className:"login-left-img"})),r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill align-items-center justify-content-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400}),r.a.createElement(b.a,{className:"d-flex flex-column align-items-center border-1 bg-white mt-4 "+(ee.isMobile?"w-90":"w-75")},r.a.createElement("h4",{className:"blue-tint text-bold mt-3"},"Welcome Back"),r.a.createElement("h5",{className:"blue-tint mt-1"},"Please log in"),r.a.createElement(v.a,{className:"w-90"},r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(139),width:20,height:20}))),r.a.createElement(w.a,{type:"email",placeholder:"Enter your email",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:s,onChange:function(t){return e.setState({email:t.target.value,emailErr:""})},invalid:!!o}))),r.a.createElement(C.a,null,o),r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(90),width:20,height:20}))),r.a.createElement(w.a,{type:"password",placeholder:"Enter your password",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:l,onChange:function(t){return e.setState({password:t.target.value,passwordErr:""})},invalid:!!i}))),r.a.createElement(C.a,null,i)),r.a.createElement("div",{className:"d-flex justify-content-between mt-4 "+(ee.isMobile?"w-90":"w-75")},r.a.createElement("div",{className:"d-flex"},r.a.createElement(D.Checkbox,{theme:"bootstrap-checkbox",value:c,onChange:function(){return e.setState({rememberMe:!e.state.rememberMe})},children:r.a.createElement("span",null)}),r.a.createElement("h6",{className:"ml-2 text-darkgray"},"Remember me")),r.a.createElement(I.a,{className:"bg-transparent border-0 shadow-none p-0",tag:"a",href:"/forgot-password"},r.a.createElement("h6",{className:"text-darkgray"},"Forgot Password?"))),n.message&&r.a.createElement(x.a,{color:n.type,className:"mt-3"},n.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 mt-3 py-2",loading:d,disabled:d,onClick:this.onSignIn},r.a.createElement("strong",null,"SIGN IN")),r.a.createElement("div",{className:"d-flex my-4"},r.a.createElement("h6",{className:"text-darkgray"},"Don't have an account?"),r.a.createElement(I.a,{className:"bg-transparent border-0 shadow-none p-0",tag:"a",href:"/sign-up"},r.a.createElement("h6",{className:"mb-0 blue-tint"},r.a.createElement("strong",null,"\xa0Sign Up"))))))),r.a.createElement("img",{alt:"...",src:a(100),className:"login-right-img"}),m&&r.a.createElement(re,{isOpen:m,toggle:function(){return e.setState({waitingConfirmation:!1})}}))}}]),n}(r.a.Component),ie=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(oe(t))}}}))(le),ce=a(130),me=a(849),de=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return r.a.createElement(ne.a,{isOpen:t,centered:!0},r.a.createElement(me.a,{className:"d-flex flex-column align-items-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400,className:"mt-5 mb-5"}),r.a.createElement("img",{alt:"...",src:a(141),width:150,height:150,className:"my-5"}),r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Thank you for registering!")),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 my-4 py-2",onClick:n},r.a.createElement("strong",null,"OK"))))}}]),n}(r.a.Component),ue=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onVerify=function(){6===a.state.code.length?a.onConfirmPhoneVerification():a.setState({alert:{type:"danger",message:"Please input verify code"}})},a.onChange=function(e){a.setState({code:e})},a.state={alert:{type:"",message:""},doneSignUp:!1,code:""},a}return Object(u.a)(n,[{key:"onConfirmPhoneVerification",value:function(){var e=this,t=this.state.code,a={userId:this.props.location.state.userId,code:t},n=this.props.location.state,r=n.admin,s=n.userId,o=n.stripeCustomerId;Q.confirmPhoneVerification(a).then((function(t){e.setState({doneSignUp:!0}),!1===r&&e.props.history.push("/signup-subscription",{userId:s,stripeCustomerId:o})})).catch((function(t){var a=t.message;t.response&&(a=t.response.data.message),e.setState({alert:{type:"danger",message:a}})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.doneSignUp,s=t.alert,o=this.props.location.state.admin;return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},r.a.createElement("div",{className:"d-flex flex-column align-items-center",style:{marginTop:-200}},r.a.createElement("img",{alt:"...",src:a(35),width:300,className:"mt-5 mb-5"}),r.a.createElement("p",{style:{color:"#364954",fontWeight:"Bold",fontSize:20},className:"mt-5 mb-3"},"Enter the verification code sent to you phone number"),r.a.createElement(ce.a,{length:6,onChange:this.onChange,autoFocus:!0,placeholder:""}),s.message&&r.a.createElement(x.a,{color:s.type,className:"mt-3"},s.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 mt-5 py-2",style:{width:400},onClick:this.onVerify},r.a.createElement("strong",null,"CONFIRM"))),n&&!0===o&&r.a.createElement(de,{isOpen:n,onClose:function(){return e.setState({doneSignUp:!1},(function(){return e.props.history.push("/sign-in")}))}}))}}]),n}(r.a.Component),pe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onVerify=function(){6===a.state.code.length?a.onConfirmPhoneVerification():a.setState({alert:{type:"danger",message:"Please input verify code"}})},a.onChange=function(e){a.setState({code:e})},a.state={alert:{type:"",message:""},doneSignUp:!1,code:"",waitingConfirmation:!1},a}return Object(u.a)(n,[{key:"onConfirmPhoneVerification",value:function(){var e=this,t=this.state.code,a=this.props.location.state,n=a.user,r=a.rememberMe,s=a.accessToken,o=a.refreshToken,l=a.email,i=a.password,c={userId:n.id,code:t};console.log(c),Q.confirmPhoneVerification(c).then((function(t){n.confirmed?(e.props.updateUser(n),e.setState({isLoggingIn:!1}),Q.setAccessToken(s),U.a.set("refreshToken",o),U.a.set("isLoggedIn",!0),r?(U.a.set("rememberMe",!0),U.a.set("email",l),U.a.set("password",i)):U.a.set("rememberMe",!1),e.props.history.push("/dashboard")):e.setState({waitingConfirmation:!0})})).catch((function(t){var a=t.message;t.response&&(a=t.response.data.message),e.setState({alert:{type:"danger",message:a}})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.waitingConfirmation,s=t.alert;return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},r.a.createElement("div",{className:"d-flex flex-column align-items-center",style:{marginTop:-200}},r.a.createElement("img",{alt:"...",src:a(35),width:300,className:"mt-5 mb-5"}),r.a.createElement("p",{style:{color:"#364954",fontWeight:"Bold",fontSize:20},className:"mt-5 mb-3"},"Enter the verification code sent to you phone number"),r.a.createElement(ce.a,{length:6,onChange:this.onChange,autoFocus:!0,placeholder:""}),s.message&&r.a.createElement(x.a,{color:s.type,className:"mt-3"},s.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 mt-5 py-2",style:{width:400},onClick:this.onVerify},r.a.createElement("strong",null,"CONFIRM"))),n&&r.a.createElement(re,{isOpen:n,toggle:function(){return e.props.history.push("/sign-in")}}))}}]),n}(r.a.Component),ge=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(oe(t))}}}))(pe),he=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSignIn=function(){e.props.history.push("/sign-in")},e.onSignUp=function(){e.props.history.push("/sign-up")},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement("div",{className:"homepage-top-height"},r.a.createElement("img",{alt:"...",src:a(35),className:"homepage-top-left-img"}),r.a.createElement("div",{className:"homepage-top-button-group homepage-top-right"},r.a.createElement(I.a,{className:"bg-white tint-color border-tint homepage-button homepage-top-login-mr",onClick:this.onSignIn},r.a.createElement("strong",null,"Log In")),r.a.createElement(I.a,{className:"bg-blue text-white border-0 homepage-button",onClick:this.onSignUp},r.a.createElement("strong",null,"Sign Up"))),r.a.createElement("img",{alt:"...",className:"homepage-top-right-img",src:a(460)})),r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:"12",lg:"6",md:"6",className:"homepage-title-left-padding"},r.a.createElement("label",{className:"homepage-title-font1",style:{display:"inline"}},"The"),"\xa0\xa0",r.a.createElement("label",{className:"homepage-title-font1",style:{color:"#0087B4",display:"inline",fontWeight:"bold",fontStyle:"italic"}},"Ultimate"),r.a.createElement("br",null),r.a.createElement("label",{className:"homepage-title-font2",style:{marginTop:-25}},"Amenity Scheduler"),r.a.createElement("br",null),r.a.createElement(I.a,{className:"bg-blue text-white border-0 homepage-button",onClick:this.onSignUp},r.a.createElement("strong",null,"Get Started"))),r.a.createElement(f.a,{xs:"12",lg:"6",md:"6",className:"homepage-calendar-img"},r.a.createElement("img",{alt:"...",src:a(461),style:{width:"80%"}}))),r.a.createElement("img",{alt:"...",src:a(462),className:"welcome-bottom-left"}))}}]),n}(r.a.Component),fe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).resetPassword=function(){console.log("Reset password");var e=a.state.email;if(e&&Object(X.isEmail)(e)){a.setState({sendingEmail:!0,alert:{type:"",message:""}});var t={email:e};console.log("Params: ",t),Q.resetPassword(t).then((function(e){console.log("Reset password: ",e.data),a.setState({sendingEmail:!1,alert:{type:"success",message:"Reset password link sent to your email"}})})).catch((function(e){console.log("Reset password err: ",e);var t=e.message;e.response&&(t=e.response.data.message),a.setState({sendingEmail:!1,alert:{type:"danger",message:t}})}))}else a.setState({emailErr:"Invalid email"})},a.state={alert:{type:"",message:""},email:"",emailErr:"",sendingEmail:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.alert,s=t.email,o=t.emailErr,l=t.sendingEmail;return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(h.a,{className:"d-flex flex-fill"},r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill justify-content-center"},r.a.createElement("img",{alt:"...",src:a(99),className:"login-left-img"})),r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill align-items-center justify-content-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400}),r.a.createElement(b.a,{className:"d-flex flex-column align-items-center border-1 bg-white mt-4 "+(ee.isMobile?"w-90":"w-75")},r.a.createElement("h4",{className:"blue-tint text-bold mt-3"},"Password Recovery"),r.a.createElement("h5",{className:"blue-tint mt-1"},"Let's get your password back"),r.a.createElement(v.a,{className:"w-90"},r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(139),width:20,height:20}))),r.a.createElement(w.a,{type:"email",placeholder:"Enter your email",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:s,onChange:function(t){return e.setState({email:t.target.value,emailErr:""})},invalid:!!o}))),r.a.createElement(C.a,null,o)),n.message&&r.a.createElement(x.a,{color:n.type},n.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 mt-4 py-2",onClick:this.resetPassword,loading:l,disabled:l},r.a.createElement("strong",null,"RESET PASSWORD")),r.a.createElement("div",{className:"d-flex my-4"},r.a.createElement("h6",{className:"text-darkgray"},"Remember your password?"),r.a.createElement(I.a,{className:"bg-transparent border-0 shadow-none p-0",tag:"a",href:"/sign-in"},r.a.createElement("h6",{className:"mb-0 blue-tint"},r.a.createElement("strong",null,"\xa0Sign In"))))))),r.a.createElement("img",{alt:"...",src:a(100),className:"login-right-img"}))}}]),n}(r.a.Component),be=a(867),Ee=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpenPopover,n=e.showPopover,s=e.togglePopover,o=e.onSignout;return r.a.createElement("div",{className:"d-flex justify-content-between bg-white px-3 py-2"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement("img",{alt:"...",src:a(35),width:200})),r.a.createElement("div",{id:"userAvatar",className:"d-flex align-items-center",style:{cursor:"pointer"},onClick:n},r.a.createElement("img",{alt:"...",src:a(463),width:30,height:30}),r.a.createElement("div",{className:"d-flex flex-column ml-2"},r.a.createElement("small",null,r.a.createElement("strong",null,this.props.user.name)),r.a.createElement("small",null,F.a.upperFirst(this.props.user.role)))),r.a.createElement(be.a,{placement:"bottom",isOpen:t,target:"userAvatar",toggle:s},r.a.createElement(I.a,{className:"bg-secondary border-0 blue-tint",onClick:o},r.a.createElement("strong",null,"Sign Out"))))}}]),n}(r.a.Component),ve=Object(l.b)((function(e){return{user:e.user}}))(Ee),ye=a(850),Ne=a(851),Se=a(852),ke=a(853),we=a(854),Ce=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state.isOpen,a=this.props,n=a.menus,s=a.className,o=a.activeMenu,l=a.onChangeMenu,i=a.onClick;return r.a.createElement(ye.a,{onClick:i,className:"justify-content-start px-0 "+s,expand:"lg"},r.a.createElement(Ne.a,{className:"ml-auto mr-0 mr-lg-5",onClick:function(){return e.setState({isOpen:!e.state.isOpen})}}),r.a.createElement(Se.a,{isOpen:t,navbar:!0},r.a.createElement(ke.a,{navbar:!0,className:"mx-4 mx-sm-0"},F.a.map(n,(function(t,a){return r.a.createElement(we.a,{key:t,tag:"button",className:"mx-2 mx-lg-4 mt-3 mt-lg-0 border-0 rounded px-3 py-2 "+(o===t?"bg-blue text-white":"bg-transparent text-darkgray"),onClick:function(){e.setState({isOpen:!1}),l(t)}},r.a.createElement("h5",{className:"mb-0"},r.a.createElement("strong",null,t)))})))))}}]),a}(r.a.Component),xe=a(81),Oe=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.day,n=e.className,s=e.onClickItem,o=e.bookingsInDay;return r.a.createElement(f.a,{className:"d-flex flex-column "+n,xl:"2",lg:"3",md:"4",sm:"6",xs:"6"},r.a.createElement("h6",null,t," ",r.a.createElement("small",null,"(",a,")")),r.a.createElement(h.a,{className:"mx-0"},F.a.times(24,(function(e){return r.a.createElement(f.a,{key:"".concat(e),xs:"auto",className:"p-0 cursor-pointer",onClick:function(){return s(e)}},r.a.createElement("div",{className:"border m-1",style:{width:25,height:25,backgroundColor:o[e]?o[e].aptColorHex:"#FFFFFF"}}))}))))}}]),a}(r.a.Component),Ie=a(306),De=a(307),Me=a.n(De),je=a(21),Be=a.n(je),Te=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).disablePastDt=function(e){var t=Be()().subtract(1,"day");return e.isAfter(t)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDateChanged,n=e.value,s=e.disabled,o=e.className;return r.a.createElement(v.a,{className:o},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:s?"bg-disabled":"bg-white"},r.a.createElement("img",{alt:"...",src:a(231),width:20,height:20}))),r.a.createElement(Me.a,{timeFormat:!1,dateFormat:"YYYY-MM-DD",value:n,className:"rdt-date-picker",isValidDate:this.disablePastDt,inputProps:{disabled:s,placeholder:"Select Booking Day"},invalid:!0,onChange:function(e){t&&t(e)}})))}}]),n}(r.a.Component),Pe=a(855),Ae=a(856),Re=a(308),_e=a.n(Re),Le=function(e){switch(e){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return null}},Ue=a(309),Ve=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onOpened=function(){var e=n.props.activeBooking;e&&n.setState({name:e.aptName,aptNumber:e.aptNumber})},n.onClosed=function(){n.setState({startedSign:!1}),n.tmr&&clearInterval(n.tmr),n.resetIsSupported?window.Reset():(window.ClearTablet(),window.SetTabletState(0,n.tmr))},n.startSignOrClear=function(){if(window.IsSigWebInstalled())if(n.resetIsSupported=n.getResetSupported(),n.resetIsSupported)if(n.state.startedSign)window.ClearTablet();else{n.setState({startedSign:!0});var e=document.getElementById("signCnv").getContext("2d");window.SetDisplayXSize(500),window.SetDisplayYSize(100),window.SetTabletState(0,n.tmr),window.SetJustifyMode(0),window.ClearTablet(),null==n.tmr||(window.SetTabletState(0,n.tmr),n.tmr=null),n.tmr=window.SetTabletState(1,e,50)}else n.setState({alert:{type:"danger",message:r.a.createElement("span",null,"There is a newer version of SigWeb available ",r.a.createElement("a",{href:"https://www.topazsystems.com/software/sigweb.exe"},"here"))}});else n.setState({alert:{type:"danger",message:"Unable to communicate with SigWeb. Please confirm that SigWeb is installed and running on this PC."}})},n.getResetSupported=function(){return!n.isOlderSigWebVersionInstalled("1.6.4.0")||(console.log("Old SigWeb version installed."),!1)},n.isOlderSigWebVersionInstalled=function(e){var t=window.GetSigWebVersion();return""!==t&&n.isOlderVersion(e,t)},n.isOlderVersion=function(e,t){for(var a=e.split("."),n=t.split("."),r=0;r<n.length;r++){var s=parseInt(n[r])||0,o=parseInt(a[r])||0;if(s<o)return!0;if(s>o)return!1}return!1},n.saveCertificate=function(){if(n.props.activeBooking)if(0!==window.NumberOfTabletPoints()){var e=n.state,t=e.name,a=e.aptNumber;if(t)if(a){n.setState({saving:!0});var r=document.getElementById("modalBody"),s=r.getBoundingClientRect();_e()(r,{scrollX:0,scrollY:0,width:s.width,height:s.height}).then((function(e){var t="covid_cert_"+Date.now()+".png",a=function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),s=r.length,o=new Uint8Array(s);s;)o[s-1]=r.charCodeAt(s-1),s-=1;return new File([o],t,{type:n})}(e.toDataURL(),t),r={bookingId:n.props.activeBooking.id,file:a,filename:t};Q.uploadCertificate(r,n.uploadListener).then((function(e){var t=e.data.data;n.setState({saving:!1}),n.props.onSavedCert&&n.props.onSavedCert(t)})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({saving:!1,alert:{type:"danger",message:t}})}))}))}else n.setState({aptNumberErr:"Invalid apt number"});else n.setState({nameErr:"Invalid name"})}else n.setState({alert:{type:"danger",message:"Please sign before continuing"}})},n.uploadListener=function(e){var t=Math.round(100*e.loaded/e.total);n.setState({percentCompleted:t})},n.onTodayDateChanged=function(e){n.setState({todayDate:e.toDate()})},n.state={alert:{type:"",message:""},startedSign:!1,name:"",nameErr:"",aptNumber:"",aptNumberErr:"",todayDate:new Date,saving:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.toggle,s=this.state,o=s.alert,l=s.name,i=s.nameErr,c=s.todayDate,m=s.aptNumber,d=s.aptNumberErr,u=s.saving,p=s.startedSign;return r.a.createElement(ne.a,{id:"mainModal",size:"lg",onOpened:this.onOpened,onClosed:this.onClosed,isOpen:a,toggle:n,centered:!0},r.a.createElement(Ue.a,null,r.a.createElement("script",{type:"text/javascript",src:"SigWebTablet.js"})),r.a.createElement(me.a,{id:"modalBody"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement("h2",{className:"text-darkgray"},r.a.createElement("strong",null,"COVID-19 CERTIFICATION-FITNESS CENTER")),r.a.createElement("h6",{className:"text-darkgray"},"In light of the Coronavirus pandemic, I understand that the NYC Department of Health, the CDC, the NYS Department of Health and other governmental agencies have recommended that certain people remain at home and self-quarantine. I recognize that my ability to enter into the Fitness Center is conditioned upon my making the representations set forth in the Certification below and that I may be denied access if management believes, in its reasonable judgement, that I am exhibiting symptoms of COVID-19.",r.a.createElement("br",null),r.a.createElement("br",null),"By signing this, I Certify that I have not: ",r.a.createElement("br",null),r.a.createElement("br",null),"a) knowingly been in close contact in the past 14 days with anyone who has tested positive for COVID-19 or who has or had symptoms of COVID-19; ",r.a.createElement("br",null),r.a.createElement("br",null),"b) tested positive for COVID-19 through a diagnostic test in the past 14 days; ",r.a.createElement("br",null),r.a.createElement("br",null),"c) experienced any symptoms of COVID-19 in the past 14 days; and ",r.a.createElement("br",null),r.a.createElement("br",null),"d) traveled within a state with significant community spread of COVID-19 for longer than 24 hours within the past 14 days.")),r.a.createElement(h.a,{className:"mx-0"},r.a.createElement(f.a,{className:"d-flex align-items-center",xs:"auto"},"Sign:"),r.a.createElement(f.a,{className:"d-flex justify-content-center"},r.a.createElement("canvas",{id:"signCnv",name:"signCnv",style:{height:100,width:500}})),r.a.createElement(f.a,{xs:"auto",className:"d-flex align-items-center"},r.a.createElement(I.a,{className:"p-1 border-0 "+(p?"bg-danger":"bg-blue"),onClick:this.startSignOrClear},r.a.createElement("small",null,p?"Clear":"Start Sign")))),r.a.createElement(y.a,{className:"d-flex align-items-end mt-3 mx-3"},r.a.createElement(Pe.a,{className:"mb-0"},"Name:"),r.a.createElement(w.a,{type:"text",placeholder:"Enter your name",className:"border-top-0 border-left-0 border-right-0 rounded-0 ml-4",value:l,onChange:function(t){return e.setState({name:t.target.value,nameErr:""})},invalid:!!i})),r.a.createElement(C.a,null,i),r.a.createElement(v.a,{row:!0,className:"mx-3 mt-3"},r.a.createElement(f.a,{xs:"12",sm:"7",className:"px-0"},r.a.createElement(y.a,{className:"d-flex align-items-end"},r.a.createElement(Pe.a,{className:"mb-0"},"Today's Date:"),r.a.createElement(Te,{value:c,onDateChanged:this.onTodayDateChanged,className:"mb-0 ml-2"}))),r.a.createElement(f.a,{xs:"12",sm:"5",className:"px-0"},r.a.createElement(y.a,{className:"d-flex align-items-end"},r.a.createElement(Pe.a,{className:"mb-0"},"Apartment #:"),r.a.createElement(f.a,null,r.a.createElement(w.a,{type:"text",className:"border-top-0 border-left-0 border-right-0 rounded-0 ml-2",value:m,onChange:function(t){return e.setState({aptNumber:t.target.value})},invalid:!!d}))),r.a.createElement(C.a,null,d))),o.message&&r.a.createElement(x.a,{className:"mt-4",color:o.type},o.message)),r.a.createElement(Ae.a,null,r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(I.a,{className:"bg-white text-darkgray p-2",onClick:n},r.a.createElement("small",null,"CANCEL")),r.a.createElement(I.a,{className:"bg-blue text-darkgray border-0 p-2 ml-3",loading:u,disabled:u,onClick:this.saveCertificate},r.a.createElement("small",null,"SAVE CERTIFICATE")))))}}]),a}(r.a.Component),He=Object(l.b)((function(e){return{user:e.user}}))(Ve),We=a(857),Ye=function(e){var t=e.title,a=e.body,n=e.errorMsg,s=e.inProgress,o=e.toggle,l=e.isOpen,i=e.posBtnTitle,c=e.negBtnTitle,m=e.centered,d=e.onClickPositive,u=e.onClickNegative;return r.a.createElement(ne.a,{isOpen:l,centered:m,toggle:o},r.a.createElement(We.a,{className:"f-family-poppins"},t),r.a.createElement(me.a,{className:"f-family-poppins",style:{lineHeight:1.5}},a,n&&r.a.createElement(x.a,{color:"danger",className:"mt-4"},n)),r.a.createElement(Ae.a,null,r.a.createElement(I.a,{color:"danger",onClick:d,loading:s,className:"f-family-poppins px-3"},i||"Yes"),u&&r.a.createElement(I.a,{color:"secondary",onClick:u,className:"f-family-poppins px-3"},c||"No")))},Fe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).getTimeSlots=function(){var e={buildingId:a.props.user.buildingId};Q.getTimeSlots(e).then((function(e){var t=e.data.data;if(0!==t.length){var n=[];F.a.forEach(t,(function(e){var t=e.start.split(":"),a=e.end.split(":");n.push({startTime:parseInt(t[0],10),startMins:parseInt(t[1],10),value:t[0]+":"+t[1]+" ~ "+a[0]+":"+a[1]})})),a.setState({timeSlots:n,fullTimeSlots:n})}a.initTimeSlots()})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({alert:{type:"danger",message:t}})}))},a.onOpened=function(){var e=a.props.activeBooking;e&&e.certUrl&&a.setState({showConfirmResignModal:!0,signedCOVID:!0})},a.openSignCOVIDDialog=function(){"doorman"===a.props.user.role&&(a.state.signedCOVID?a.setState({showConfirmResignModal:!0}):a.setState({showSignCOVIDModal:!0}))},a.deleteBooking=function(){var e=a.props.activeBooking;if(e){a.setState({deletingBook:!0});var t={bookingId:e.id};Q.cancelBooking(t).then((function(e){var t=e.data.data.bookingId;a.setState({showConfirmDeleteModal:!1,deletingBook:!1}),a.props.onDeleteBooking&&a.props.onDeleteBooking(t)})).catch((function(e){a.setState({deletingBook:!1})}))}},a.saveBooking=function(){if(a.props.user.id){var e=a.props.activeBooking,t=a.state,n=t.bookingDate,r=t.bookingTime,s=t.aptNumber,o=t.aptColorHex,l=t.aptName,i=t.bookingNote;if(n)if(s){n=n.toDate();var c=F.a.find(a.state.fullTimeSlots,(function(e){return e.value===r}));n.setHours(c.startTime),n.setMinutes(c.startMins);var m={bookingId:e?e.id:null,userId:a.props.user.id,userName:a.props.user.name,userPhoneNumber:a.props.user.phoneNumber,userRole:a.props.user.role,bookedDateTime:n,aptNumber:s,aptColorHex:o,aptName:l,bookingNote:i,buildingId:a.props.user.buildingId};a.setState({savingBook:!0,alert:{type:"",message:""}}),Q.saveBooking(m).then((function(e){a.setState({savingBook:!1});var t=e.data.data;a.props.onBookDone&&a.props.onBookDone(t)})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({savingBook:!1,alert:{type:"danger",message:t}})}))}else a.setState({aptNumberErr:"Apartment number cannot be empty"})}},a.onDateChanged=function(e){a.setState({bookingDate:e}),a.getBookedTimeSlots(e.toDate())},a.getBookedTimeSlots=function(e){var t=e;t.setHours(5),t.setMinutes(0),t.setSeconds(0);var n={filterDate:t};a.setState({fetchingBookedSlots:!0}),Q.getBookedTimeSlots(n).then((function(e){var t,n=e.data.data,r=F.a.filter(a.state.fullTimeSlots,(function(e){return-1===F.a.findIndex(n,(function(t){var a=new Date(t.bookedDateTime);return a.getHours()===e.startTime&&a.getMinutes()===e.startMins}))})),s=F.a.findIndex(r,(function(e){return e.value===a.state.bookingTime}));if(-1!==s)t=r[s].value;else if(a.props.activeBooking){var o=a.props.activeBooking,l=new Date(o.bookedDateTime),i=l.getHours(),c=l.getMinutes();t=F.a.find(a.state.timeSlots,(function(e){return e.startTime===i&&e.startMins===c})).value}else t=r.length>0?r[0].value:"Not available booking time";a.setState({timeSlots:r,bookingTime:t,fetchingBookedSlots:!1})})).catch((function(e){a.setState({fetchingBookedSlots:!1})}))},a.getApartments=function(){var e={buildingId:a.props.user.buildingId};Q.getApartments(e).then((function(e){var t=e.data.data;if(t&&t.length>0){var n=a.state,r=n.aptNumber,s=n.aptName,o=n.aptColorHex,l=0;r&&(l=F.a.findIndex(t,(function(e){return e.aptNumber===r}))),a.setState({aptNumbers:t,aptNumber:r||t[0].aptNumber,aptColorHex:o||t[0].aptColorHex,aptNames:F.a.split(t[l].aptNames,","),aptName:s||F.a.split(t[l].aptNames,",")[0]})}})).catch((function(e){console.log("APT numbers err: ",e)}))},a.onSavedCert=function(e){a.setState({signedCOVID:!0,showSignCOVIDModal:!1}),a.props.onSavedCert&&a.props.onSavedCert(e)},a.onChangeAPTNumber=function(e){var t=a.state.aptNumbers,n=F.a.findIndex(t,(function(t){return t.aptNumber===e.target.value}));-1!==n&&a.setState({aptNumber:e.target.value,aptColorHex:t[n].aptColorHex,aptNames:F.a.split(t[n].aptNames,","),aptName:F.a.split(t[n].aptNames,",")[0]})},a.renderTimeSlots=function(){var e=a.state.timeSlots,t=a.props.activeBooking;if(t){var n=[],s=new Date(t.bookedDateTime),o=s.getHours(),l=s.getMinutes(),i=F.a.find(a.state.fullTimeSlots,(function(e){return e.startTime===o&&e.startMins===l}));return i&&n.push(r.a.createElement("option",{key:i.value,value:i.value},i.value)),n.push(r.a.createElement("optgroup",{key:"timeslots",label:"Available time slots"},F.a.map(e,(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.value)})))),n}return F.a.map(e,(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.value)}))},a.state={alert:{type:"",message:""},fullTimeSlots:[{startTime:8,startMins:0,value:"8:00 ~ 9:00"}],timeSlots:[{startTime:8,startMins:0,value:"8:00 ~ 9:00"}],bookingDate:void 0,bookingTime:"8:00 ~ 9:00",aptNumbers:[],aptNumber:"",aptNumberErr:"",aptName:"",aptNames:[],aptColorHex:"",bookingNote:"",bookingNoteErr:"",showSignCOVIDModal:!1,showConfirmResignModal:!1,showConfirmDeleteModal:!1,savingBook:!1,deletingBook:!1,fetchingBookedSlots:!1,signedCOVID:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getApartments(),this.getTimeSlots()}},{key:"initTimeSlots",value:function(){var e=this.props,t=e.bookingDateTime,a=e.user,n=e.activeBooking;if(t){var r=t.getHours(),s=t.getMinutes(),o=F.a.find(this.state.timeSlots,(function(e){return e.startTime===r&&e.startMins===s}));o&&this.setState({bookingDate:Be()(t),bookingTime:o.value})}if(n){var l=new Date(n.bookedDateTime);this.getBookedTimeSlots(l);var i=l.getHours(),c=l.getMinutes();this.setState({bookingDate:Be()(l),aptNumber:n.aptNumber,aptName:n.aptName,aptColorHex:n.aptColorHex,bookingNote:n.note,signedCOVID:!!n.certUrl});var m=F.a.find(this.state.timeSlots,(function(e){return e.startTime===i&&e.startMins===c}));m&&this.setState({bookingTime:m.value})}else if(t&&this.getBookedTimeSlots(t),"shareholder"===a.role)return void this.setState({aptNumbers:[{aptNumber:a.aptNumber,aptColorHex:a.aptColorHex}],aptNames:[F.a.last(F.a.split(a.name," "))],aptName:F.a.last(F.a.split(a.name," ")),aptNumber:a.aptNumber,aptColorHex:a.aptColorHex})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,s=t.toggle,o=t.user,l=t.activeBooking,i=this.state,c=i.alert,m=i.bookingDate,d=i.bookingTime,u=i.aptNumbers,p=i.aptNumber,g=i.aptNumberErr,b=i.aptName,E=i.aptNames,y=i.bookingNote,N=i.showSignCOVIDModal,S=i.showConfirmResignModal,k=i.showConfirmDeleteModal,O=i.savingBook,D=i.deletingBook,M=i.fetchingBookedSlots;i.signedCOVID;return r.a.createElement(ne.a,{isOpen:n,toggle:s,onOpened:this.onOpened,size:"lg",centered:!0},r.a.createElement(me.a,null,r.a.createElement("div",{className:"d-flex  flex-grow-1 justify-content-between"},r.a.createElement("h4",{className:"mb-0 text-darkgray"},r.a.createElement("strong",null,"Add New Booking")),r.a.createElement(I.a,{className:"border-0 bg-transparent p-0",onClick:s},r.a.createElement("img",{alt:"...",src:a(232),width:30,height:30}))),r.a.createElement(h.a,{className:"mt-5"},r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement("h6",null,r.a.createElement("strong",null,"DATE")),r.a.createElement("div",null,r.a.createElement(Te,{value:m,onDateChanged:this.onDateChanged,className:"mb-0"}))),r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement("h6",null,r.a.createElement("strong",null,"TIME")),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(w.a,{type:"select",disabled:M,value:d,onChange:function(t){return e.setState({bookingTime:t.target.value})}},this.renderTimeSlots()))))),r.a.createElement(h.a,{className:"mt-4"},r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement("h6",null,r.a.createElement("strong",null,"Apartment #")),r.a.createElement("div",null,r.a.createElement(w.a,{type:"select",value:p,disabled:"shareholder"===o.role,onChange:this.onChangeAPTNumber,invalid:!!g},F.a.map(u,(function(e){return r.a.createElement("option",{value:e.aptNumber,key:e.aptNumber},e.aptNumber)}))),r.a.createElement(C.a,null,g))),r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement("h6",null,r.a.createElement("strong",null,"Apartment Name")),r.a.createElement("div",null,r.a.createElement(w.a,{type:"select",value:b,disabled:"shareholder"===o.role,onChange:function(t){return e.setState({aptName:t.target.value})}},F.a.map(E,(function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(C.a,null,g)))),r.a.createElement(h.a,{className:"mt-4 mt-sm-5"},r.a.createElement(f.a,{lg:"10"},r.a.createElement("h6",null,r.a.createElement("strong",null,"BOOKING NOTES")),r.a.createElement(w.a,{type:"textarea",placeholder:"Add a Note...",value:y,onChange:function(t){return e.setState({bookingNote:t.target.value})}}))),c.message&&r.a.createElement(x.a,{color:c.type,className:"mt-4"},c.message),r.a.createElement("div",{className:"d-flex justify-content-end mt-5"},r.a.createElement(I.a,{className:"bg-white text-darkgray p-2",onClick:s},r.a.createElement("small",{style:{fontWeight:"bold"}},"CLOSE")),l&&("doorman"===o.role||"admin"===o.role)&&r.a.createElement(I.a,{className:"bg-reject text-white border-0 p-2 ml-3",loading:D,disabled:D,onClick:function(){return e.setState({showConfirmDeleteModal:!0})}},r.a.createElement("small",{style:{fontWeight:"bold"}},"DELETE BOOKING")),(!l||"shareholder"===o.role&&l.aptNumber===o.aptNumber||"admin"===o.role||"doorman"===o.role)&&r.a.createElement(I.a,{className:"bg-blue text-white border-0 p-2 ml-3",loading:O,disabled:O,onClick:this.saveBooking},r.a.createElement("small",{style:{fontWeight:"bold"}},l?"EDIT BOOKING":"SAVE BOOKING")))),N&&r.a.createElement(He,{isOpen:N,toggle:function(){return e.setState({showSignCOVIDModal:!1})},activeBooking:l,onSavedCert:this.onSavedCert}),S&&r.a.createElement(Ye,{isOpen:S,centered:!0,title:"Confirm",body:"Shareholder already signed, Sign another certificate?",onClickPositive:function(){return e.setState({showConfirmResignModal:!1,showSignCOVIDModal:!0})},onClickNegative:function(){return e.setState({showConfirmResignModal:!1})}}),k&&r.a.createElement(Ye,{isOpen:k,title:"Cancel Booking",body:"Are you sure to cancel this booking?",centered:!0,inProgress:D,onClickPositive:this.deleteBooking,onClickNegative:function(){return e.setState({showConfirmDeleteModal:!1})}}))}}]),n}(r.a.Component),qe=Object(l.b)((function(e){return{user:e.user}}))(Fe),ze=a(132),Ge=a.n(ze),Ke=a(133),$e=a.n(Ke),Je=a(134),Qe=a.n(Je),Xe=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getTimeSlots=function(){var e={buildingId:n.props.user.buildingId};Q.getTimeSlots(e).then((function(e){var t=e.data.data;if(0!==t.length){var a=[{startTime:0,startMin:0,startValue:"CET"}];F.a.forEach(t,(function(e){var t=e.start.split(":"),n=e.end.split(":");a.push({startTime:parseInt(t[0],10),startMin:parseInt(t[1],10),startValue:t[0]+":"+t[1],endValue:n[0]+":"+n[1]})})),n.setState({timeSlots:a})}})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t}})}))},n.onBookDone=function(e){var t=n.state.bookings,a=F.a.findIndex(t,(function(t){return t.id===e.id}));-1!==a?t[a]=e:t=[e].concat(Object(m.a)(t)),n.setState({showBookingModal:!1,bookings:t}),n.props.onAddedBooking&&n.props.onAddedBooking(e)},n.onSavedCert=function(e){var t=e.bookingId,a=e.certUrl,r=n.state.bookings,s=F.a.findIndex(r,(function(e){return e.id===t}));-1!==s&&(r[s].certUrl=a,n.setState({bookings:r}),n.props.onSavedCert&&n.props.onSavedCert(e))},n.downloadAllCerts=function(){var e=n.props.selectedMonth,t=n.state.bookings,a=F.a.without(F.a.map(t,(function(e){return e.certUrl?{url:e.certUrl,name:e.name,bookedDateTime:e.bookedDateTime}:null})),null),r=new Ge.a,s="covid_certs_"+e.getFullYear()+"_"+(e.getMonth()+1)+"_"+e.getDate()+".zip",o=0;a.forEach((function(e){var t=e.name+"_covid_cert_"+Be()(e.bookedDateTime).format("YYYY-MM-DD-hh-mm")+".png";$e.a.getBinaryContent(e.url,(function(e,n){if(e)throw e;r.file(t,n,{binary:!0}),++o===a.length&&r.generateAsync({type:"blob"}).then((function(e){Qe()(e,s)}))}))}))},n.onDeleteBooking=function(e){var t=n.state.bookings;F.a.remove(t,(function(t){return t.id==e})),n.setState({bookings:t,showBookingModal:!1,activeBooking:void 0}),n.props.onDeleteBooking&&n.props.onDeleteBooking(e)},n.scrollRef=r.a.createRef(),n.slotWidth=ee.isMobile?80:120,n.slotHeight=ee.isMobile?60:80,n.state={bookingDateTime:void 0,showBookingModal:!1,showSignCOVIDModal:!1,activeBooking:void 0,bookings:[],timeSlots:[{startTime:0,startMin:0,startValue:"CET"}]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.bookings&&this.setState({bookings:this.props.bookings}),this.scrollRef.current&&this.props.date&&this.props.date>4&&this.scrollRef.current.scrollTo((this.props.date-1)*this.slotWidth,0),this.getTimeSlots()}},{key:"render",value:function(){var e=this,t=this.state,a=t.showBookingModal,n=t.bookingDateTime,s=t.bookings,o=t.activeBooking,l=t.timeSlots,i=this.props,c=i.numDays,m=i.firstDay,d=i.selectedMonth;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bg-white border border-0 rounded shadow-sm py-4 px-3 mt-3"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h4",{className:"blue-tint text-center"},r.a.createElement("strong",null,Be()(d).format("MMMM YYYY")))),r.a.createElement("div",{className:"d-flex w-100 mt-4"},r.a.createElement("div",null,F.a.map(l,(function(t,a){return r.a.createElement("div",{key:t.startValue,className:"d-flex flex-column align-items-center justify-content-center border bg-white p-1",style:{width:e.slotWidth,height:e.slotHeight}},0===a&&r.a.createElement("h6",{className:"mb-0 text-darkgray-50 text-center"},"Time Slot"),a>0&&r.a.createElement("div",{className:"align-items-center"},r.a.createElement("small",{className:"mb-0 text-darkgray"},t.startValue),r.a.createElement("h6",{className:"mb-0 text-darkgray-50 text-center"},"~"),r.a.createElement("small",{className:"mb-0 text-darkgray"},t.endValue)))}))),r.a.createElement(Ie.a,{innerRef:this.scrollRef,vertical:!0,className:"d-flex w-100"},F.a.times(c,(function(t){return r.a.createElement("div",{key:"".concat(t)},F.a.map(l,(function(a,n){var o=F.a.find(s,(function(e){var n=new Date(e.bookedDateTime),r=n.getDate(),s=n.getHours(),o=n.getMinutes();return r===t+1&&a.startTime===s&&a.startMin===o}));return r.a.createElement("div",{key:a.startValue,className:"d-flex flex-column align-items-center justify-content-center border bg-white p-0 p-sm-1",style:{width:e.slotWidth,height:e.slotHeight,cursor:"pointer"},onClick:function(){if(o)e.setState({showBookingModal:!0,activeBooking:o});else{var n=d;n.setDate(t+1),n.setHours(a.startTime),n.setMinutes(a.startMin),e.setState({bookingDateTime:n,showBookingModal:!0,activeBooking:void 0})}}},t>=0&&0===n&&r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement("h6",{className:"text-darkgray-50 "+(ee.isMobile?"mb-0":"mb-2")},Le((m+t)%7)),r.a.createElement(ee.BrowserView,null,r.a.createElement("strong",{className:"text-darkgray"},t+1)),r.a.createElement(ee.MobileView,null,r.a.createElement("small",null,r.a.createElement("strong",{className:"text-darkgray"},t+1)))),t>=0&&n>0&&o&&r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center w-100 h-100 p-1",style:{backgroundColor:o.aptColorHex,cursor:"pointer"}},r.a.createElement("small",{className:"text-darkgray"},r.a.createElement("strong",null,o.aptNumber)),r.a.createElement("small",{className:"text-darkgray text-center"},F.a.truncate(o.aptName,{length:16})),r.a.createElement("small",{className:"text-lightblue"},Be()(o.bookedDateTime).format("hh:mm a"))))})))}))))),a&&r.a.createElement(qe,{bookingDateTime:n,isOpen:a,toggle:function(){return e.setState({showBookingModal:!1})},activeBooking:o,onDeleteBooking:this.onDeleteBooking,onSavedCert:this.onSavedCert,onBookDone:this.onBookDone}))}}]),a}(r.a.Component),Ze=Object(l.b)((function(e){return{user:e.user}}))(Xe),et=a(858),tt=a(859),at=a(860),nt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activeIndex,a=e.className,n=e.onPaginate;return r.a.createElement(et.a,{size:"sm",className:a},F.a.times(12,(function(e){return r.a.createElement(tt.a,{key:"".concat(e),active:t===e+1,onClick:function(){return n(e+1)}},r.a.createElement(at.a,{className:"text-gray"},e+1))})))}}]),a}(r.a.Component),rt=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).getApartments=function(){var e={buildingId:a.props.user.buildingId};Q.getApartments(e).then((function(e){var t=e.data.data;a.setState({apartments:t})}))},a.onClickItem=function(e){a.setState({showDetailedCalendar:!0,detailedCalendarDate:e})},a.onPaginate=function(e){var t=new Date;t.setMonth(e-1),a.setState({selectedPagination:e,selectedMonth:t,numDays:a.getDaysInMonth(t.getFullYear(),t.getMonth()+1)},(function(){a.getBookingsAtMonth()}))},a.getDaysInMonth=function(e,t){return new Date(e,t,0).getDate()},a.getBookingsAtMonth=function(){if(a.props.user.id){var e={filterMonth:a.state.selectedMonth,buildingId:a.props.user.buildingId};Q.getBookingsAtMonth(e).then((function(e){var t=e.data.data;a.setState({bookings:t||[]})}))}},a.getBookingsInDay=function(e){var t=a.state,n=t.bookings,r=t.selectedMonth;return n&&0!==n.length?F.a.filter(n,(function(t){var a=new Date(t.bookedDateTime);return a.getFullYear()===r.getFullYear()&&a.getMonth()===r.getMonth()&&a.getDate()===e})):[]},a.getFirstDayOfMonth=function(){var e=a.state.selectedMonth;return e.setDate(1),e.getDay()},a.onAddedBooking=function(e){var t=a.state.bookings,n=F.a.findIndex(t,(function(t){return t.id===e.id}));-1!==n?t[n]=e:t=[].concat(Object(m.a)(t),[e]),a.setState({bookings:t,showBookingModal:!1})},a.getDayOfDate=function(e){var t=a.state.selectedMonth;return t.setDate(e),Le(t.getDay())},a.onSavedCert=function(e){var t=e.bookingId,n=e.certUrl,r=a.state.bookings,s=F.a.findIndex(r,(function(e){return e.id===t}));-1!==s&&(r[s].certUrl=n,a.setState({bookings:r}))},a.onDeleteBooking=function(e){var t=a.state.bookings;F.a.remove(t,(function(t){return t.id==e})),a.setState({bookings:t}),a.props.onDeleteBooking&&a.props.onDeleteBooking(e)},a.renderApts=function(){var e=a.state.apartments;return r.a.createElement(h.a,null,F.a.map(e,(function(e){return r.a.createElement(f.a,{key:e.aptNumber,xs:"3",lg:"2",className:"d-flex align-items-center justify-content-center border-right mt-2 py-2"},r.a.createElement("h6",{className:"mb-0"},e.aptNumber),r.a.createElement("div",{className:"ml-2",style:{width:40,height:25,backgroundColor:e.aptColorHex}}))})))},a.downloadAllCerts=function(){var e=a.state,t=e.bookings,n=e.selectedMonth,r=F.a.without(F.a.map(t,(function(e){return e.certUrl?{url:e.certUrl,name:e.name,bookedDateTime:e.bookedDateTime}:null})),null),s=new Ge.a,o="covid_certs_"+n.getFullYear()+"_"+(n.getMonth()+1)+"_"+n.getDate()+".zip",l=0;r.forEach((function(e){var t=e.name+"_covid_cert_"+Be()(e.bookedDateTime).format("YYYY-MM-DD-hh-mm")+".png";$e.a.getBinaryContent(e.url,(function(e,a){if(e)throw e;s.file(t,a,{binary:!0}),++l===r.length&&s.generateAsync({type:"blob"}).then((function(e){Qe()(e,o)}))}))}))},a.state={selectedMonth:new Date,numDays:0,screenWidth:0,showBookingModal:!1,showDetailedCalendar:!1,detailedCalendarDate:1,selectedPagination:0,rowCount:1,bookings:[],showSignCOVIDModal:!1,activeBooking:void 0,apartments:[]},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(xe.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getApartments(),this.onPaginate((new Date).getMonth()+1),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({screenWidth:window.innerWidth})}},{key:"render",value:function(){var e=this,t=this.state,n=t.screenWidth,s=t.showBookingModal,o=t.showDetailedCalendar,l=t.selectedPagination,i=t.selectedMonth,c=t.numDays,m=t.bookings,d=t.detailedCalendarDate;this.props.user;return r.a.createElement("div",{className:"d-flex flex-column my-4 mx-2 mx-lg-5"},r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(I.a,{className:"bg-blue border-0 shadow-sm",onClick:function(){return e.setState({showBookingModal:!0})}},"BOOK NOW")),r.a.createElement(E.a,{className:"mt-3",style:{float:"right"}},r.a.createElement(I.a,{className:"bg-white border-grey w-50",onClick:function(){e.setState({showDetailedCalendar:!1})}},o?r.a.createElement("img",{alt:"...",src:a(231),width:20,height:20}):r.a.createElement("img",{alt:"...",src:a(486),width:20,height:20})),r.a.createElement(I.a,{className:"bg-white border-grey w-50",onClick:function(){e.setState({showDetailedCalendar:!0})}},o?r.a.createElement("img",{alt:"...",src:a(487),width:20,height:20}):r.a.createElement("img",{alt:"...",src:a(488),width:20,height:20})))),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bg-white border border-0 rounded shadow-sm py-4 px-3 mt-3"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h4",{className:"blue-tint text-center"},r.a.createElement("strong",null,Be()(i).format("MMMM YYYY")))),r.a.createElement(h.a,{className:"mx-2 mx-sm-4"},F.a.times(c,(function(t){return r.a.createElement(Oe,{key:"".concat(t+1),date:t+1,day:e.getDayOfDate(t+1),bookingsInDay:e.getBookingsInDay(t+1),onClickItem:function(){return e.onClickItem(t+1)},className:"py-2 px-2 border-right border-bottom "+(n>=1200&&(t+1)%6===0||n>=992&&n<1200&&(t+1)%4===0||n>=768&&n<992&&(t+1)%3===0||n<768&&(t+1)%2===0?"border-right-0":"border-right-1")})})))),r.a.createElement(nt,{activeIndex:l,onPaginate:this.onPaginate,className:"d-flex justify-content-end mt-1"})),o&&r.a.createElement(Ze,{numDays:c,selectedMonth:i,firstDay:this.getFirstDayOfMonth(),date:d,bookings:m,onAddedBooking:this.onAddedBooking,onDeleteBooking:this.onDeleteBooking,onSavedCert:this.onSavedCert}),r.a.createElement(b.a,{className:"shadow-sm px-4 py-4 mt-5"},r.a.createElement("h6",{className:"text-darkgray"},r.a.createElement("strong",null,"Apartment Colors")),r.a.createElement("hr",{className:"bg-gray"}),this.renderApts()),s&&r.a.createElement(qe,{isOpen:s,activeBooking:void 0,toggle:function(){return e.setState({showBookingModal:!1})},onBookDone:this.onAddedBooking}))}}]),n}(r.a.Component),st=Object(l.b)((function(e){return{user:e.user}}))(rt),ot=a(861),lt=a(862),it=a(85),ct=a.n(it),mt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getPendingRegistrations=function(){n.setState({isLoading:!0});var e={buildingId:n.props.user.buildingId};Q.getPendingRegistrations(e).then((function(e){var t=e.data.data;n.setState({registrations:t,isLoading:!1})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({isLoading:!1,alert:{type:"danger",message:t}})}))},n.accept=function(e){var t={regId:e.id};Q.acceptRegistration(t).then((function(e){var t=e.data.data.regId,a=n.state.registrations;F.a.remove(a,(function(e){return e.id==t})),n.setState({registrations:a})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t}})}))},n.reject=function(){var e={regId:n.state.activeRegistration.id};Q.rejectRegistration(e).then((function(e){var t=e.data.data.regId,a=n.state.registrations;F.a.remove(a,(function(e){return e.id==t})),n.setState({registrations:a,showRejectConfirmModal:!1})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t}})}))},n.renderRegistrations=function(){var e=n.state,t=e.registrations,a=e.isLoading;return r.a.createElement(ct.a,{active:a,spinner:!0},r.a.createElement(ot.a,null,F.a.map(t,(function(e){return r.a.createElement(lt.a,{key:e.email,className:"shadow-sm py-3 mt-3"},r.a.createElement(h.a,{className:"mx-0 bg-white"},r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"2",className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"NAME")),r.a.createElement("h6",{className:"mb-0"},e.name)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"3",className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"EMAIL")),r.a.createElement("h6",{className:"mb-0"},e.email)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"3",className:"mt-3 mt-sm-0 px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"PHONE NUMBER")),r.a.createElement("h6",{className:"mb-0"},e.phoneNumber)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"auto",className:"mt-3 mt-sm-0 px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"APT NUMBER")),r.a.createElement("h6",{className:"mb-0"},e.aptNumber)),r.a.createElement(f.a,{className:"d-flex justify-content-end align-items-center mt-3 mt-lg-0 px-1"},r.a.createElement(I.a,{className:"bg-accept border-0 text-white",onClick:function(){return n.accept(e)}},"Accept"),r.a.createElement(I.a,{className:"bg-reject border-0 text-white ml-2",onClick:function(){return n.setState({showRejectConfirmModal:!0,activeRegistration:e})}},"Reject"))))}))))},n.state={alert:{type:"",message:""},isLoading:!1,showRejectConfirmModal:!1,activeRegistration:void 0,registrations:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getPendingRegistrations()}},{key:"render",value:function(){var e=this,t=this.state,a=t.alert,n=t.showRejectConfirmModal;return r.a.createElement("div",{className:"my-4 mx-2 mx-lg-5"},a.message&&r.a.createElement(x.a,{color:a.type},a.message),this.renderRegistrations(),n&&r.a.createElement(Ye,{isOpen:n,title:"Reject",body:"Are you sure to reject this registration?",onClickPositive:this.reject,onClickNegative:function(){return e.setState({showRejectConfirmModal:!1,activeRegistration:!1})}}))}}]),a}(r.a.Component),dt=Object(l.b)((function(e){return{user:e.user}}))(mt),ut=a(312),pt=a.n(ut),gt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).trackScrolling=Object(B.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("container"),!n.isBottom(t)){e.next=5;break}if(!n.state.loadingMore){e.next=4;break}return e.abrupt("return");case 4:if(n.state.offset<n.state.totalCount)try{n.setState({loadingMore:!0}),n.getBookings()}catch(a){n.setState({loadingMore:!1})}case 5:case"end":return e.stop()}}),e)}))),n.getBookings=function(){if(n.props.user.id){var e={userId:n.props.user.id,role:n.props.user.role,offset:n.state.offset,limit:n.state.limit,showOldBooking:n.state.showOldBooking,buildingId:n.props.user.buildingId};n.setState({isLoading:!0}),Q.getBookings(e).then((function(e){var t=e.data.data,a=t.data,r=t.limit,s=t.totalCount;a.length>0&&n.setState({isLoading:!1,loadingMore:!1,bookings:[].concat(Object(m.a)(n.state.bookings),Object(m.a)(a)),offset:n.state.offset+r,limit:r,totalCount:s||0})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({isLoading:!1,loadingMore:!1,alert:{type:"danger",message:t}})}))}},n.onBookDone=function(e){var t=n.state.bookings,a=F.a.findIndex(t,(function(t){return t.id===e.id}));-1!==a?t[a]=e:t=[e].concat(Object(m.a)(t)),n.setState({bookings:t,showBookingModal:!1,isLoading:!1})},n.showConfirmDeleteModal=function(e){n.setState({showConfirmDeleteModal:!0,activeBooking:e})},n.cancelBooking=function(){var e=n.state.activeBooking;n.setState({cancelBook:!0});var t={bookingId:e.id};Q.cancelBooking(t).then((function(e){var t=e.data.data.bookingId,a=n.state.bookings;F.a.remove(a,(function(e){return e.id==t})),n.setState({bookings:a,cancelBook:!1,showConfirmDeleteModal:!1})})).catch((function(e){n.setState({cancelBook:!1})}))},n.downloadCovidCert=function(e){fetch(e.certUrl).then((function(t){t.blob().then((function(t){var a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=e.name+"_covid_cert_"+Be()(e.bookedDateTime).format("YYYY-MM-DD")+".png",n.click()}))}))},n.editBooking=function(e){n.setState({activeBooking:e,showBookingModal:!0})},n.renderBookings=function(){var e=n.state,t=e.bookings,a=e.isLoading,s=n.props.user;return r.a.createElement(ct.a,{active:a,spinner:!0},r.a.createElement(ot.a,null,F.a.map(t,(function(e){return r.a.createElement(lt.a,{key:e.id,className:"shadow-sm py-3 mt-3"},r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:ee.isMobile?"12":"10"},r.a.createElement(h.a,{className:"mx-0 bg-white"},r.a.createElement(f.a,{xs:"4",lg:"2",className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"NAME")),r.a.createElement("h6",{className:"mb-0"},e.aptName)),r.a.createElement(f.a,{xs:"4",lg:"2",className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"ROLE")),r.a.createElement("h6",{className:"mb-0"},e.role)),r.a.createElement(f.a,{xs:"4",lg:"3",className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"APT NUMBER")),r.a.createElement("h6",{className:"mb-0"},e.aptNumber)),r.a.createElement(f.a,{xs:"6",lg:"2",className:"mt-3 mt-lg-0 px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"DATE")),r.a.createElement("h6",{className:"mb-0"},Be()(e.bookedDateTime).format("DD/MM/YYYY"))),r.a.createElement(f.a,{xs:"6",lg:"3",className:"mt-3 mt-lg-0 px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"TIME")),r.a.createElement("h6",{className:"mb-0"},Be()(e.bookedDateTime).format("hh:mm a")))),e.note&&r.a.createElement(h.a,{className:"mx-0 mt-3"},r.a.createElement(f.a,{className:"px-1"},r.a.createElement("h6",null,r.a.createElement("strong",null,"BOOKING NOTE")),r.a.createElement("h6",{className:"mb-0"},e.note)))),r.a.createElement(f.a,{className:"d-flex flex-column justify-content-center align-items-end"},r.a.createElement("div",{className:"d-flex"},r.a.createElement(I.a,{className:"bg-blue border-0 text-white ml-2",onClick:function(){return n.editBooking(e)}},"Edit"),r.a.createElement(I.a,{className:"bg-reject border-0 text-white ml-2",onClick:function(){return n.showConfirmDeleteModal(e)}},"Cancel")),"admin"===s.role&&e.certUrl&&r.a.createElement(I.a,{size:"sm",className:"bg-accept border-0 text-white ml-2 mt-3 p-1",onClick:function(){return n.downloadCovidCert(e)}},r.a.createElement("small",null,"Download COVID-19 Cert")))))}))))},n.onDeleteBooking=function(e){var t=n.state.bookings;F.a.remove(t,(function(t){return t.id==e})),n.setState({bookings:t,showBookingModal:!1,activeBooking:void 0}),n.props.onDeleteBooking&&n.props.onDeleteBooking(e)},n.state={alert:{type:"",message:""},showBookingModal:!1,isLoading:!1,bookings:[],showConfirmDeleteModal:!1,activeBooking:void 0,cancelBook:!1,showOldBooking:0,offset:0,limit:10,totalCount:0,loadingMore:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getBookings(),document.addEventListener("scroll",this.trackScrolling)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.trackScrolling)}},{key:"isBottom",value:function(e){return e.getBoundingClientRect().bottom<=window.innerHeight+10}},{key:"render",value:function(){var e=this,t=this.state,a=t.showBookingModal,n=t.showConfirmDeleteModal,s=t.cancelBook,o=t.activeBooking,l=t.showOldBooking,i=t.loadingMore;return r.a.createElement("div",{id:"container",className:"my-4 mx-2 mx-lg-5"},r.a.createElement("div",{className:"d-flex flex-column align-items-end"},r.a.createElement(I.a,{className:"bg-blue border-0 shadow-sm mb-4",onClick:function(){return e.setState({showBookingModal:!0,activeBooking:void 0})}},"BOOK NOW"),r.a.createElement("div",{className:"d-inline-block mt-2"},r.a.createElement(w.a,{type:"select",value:l,onChange:function(t){e.setState({showOldBooking:parseInt(t.target.value),offset:0,limit:10,totalCount:0,bookings:[]},(function(){e.getBookings()}))}},r.a.createElement("option",{value:0},"Show available bookings"),r.a.createElement("option",{value:1},"Show all bookings")))),this.renderBookings(),i&&r.a.createElement(pt.a,{className:"d-flex mx-auto mt-4"}),a&&r.a.createElement(qe,{isOpen:a,activeBooking:o,toggle:function(){return e.setState({showBookingModal:!1,activeBooking:void 0})},onBookDone:this.onBookDone,onDeleteBooking:this.onDeleteBooking}),n&&r.a.createElement(Ye,{isOpen:n,title:"Cancel Booking",body:"Are you sure to cancel this booking?",inProgress:s,onClickPositive:this.cancelBooking,onClickNegative:function(){return e.setState({showConfirmDeleteModal:!1,activeBooking:void 0})}}))}}]),a}(r.a.Component),ht=Object(l.b)((function(e){return{user:e.user}}))(gt),ft=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onAddDoorman=function(){var e=a.props,t=e.activeDoorman,n=e.buildingId,r=a.state,s=r.name,o=r.email,l=r.phoneNumber,i=r.password,c=r.confirmPassword;if(s)if(o&&Z.a.isEmail(o))if(l&&Z.a.isMobilePhone(l))if(i)if(i.length<6)a.setState({addingDoorman:!1,alert:{type:"danger",message:"Password must be atleast 6 length"}});else if(c)if(i===c){a.setState({addingDoorman:!0});var m={id:t?t.id:"",name:s,email:o,phoneNumber:l,password:i,role:"doorman",buildingId:n};Q.addDoorman(m).then((function(e){var t=e.data.data;a.setState({addingDoorman:!1}),a.props.onAddedDoorman&&a.props.onAddedDoorman(t)})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({addingDoorman:!1,alert:{type:"danger",message:t}})}))}else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Password not match"}});else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Input confirm password"}});else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Invalid password"}});else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Invalid phone number"}});else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Invalid email"}});else a.setState({addingDoorman:!1,alert:{type:"danger",message:"Invalid name"}})},a.state={alert:{type:"",message:""},name:"",nameErr:"",email:"",emailErr:"",phoneNumber:"",phoneNumberErr:"",password:"",passwordErr:"",confirmPassword:"",confirmPasswordErr:"",addingDoorman:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.activeDoorman;e&&this.setState({name:e.name,email:e.email,phoneNumber:e.phoneNumber})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,s=t.toggle,o=t.activeDoorman,l=this.state,i=l.alert,c=l.name,m=l.nameErr,d=l.email,u=l.emailErr,p=l.phoneNumber,g=l.phoneNumberErr,b=l.password,E=l.passwordErr,v=l.confirmPassword,N=l.confirmPasswordErr,S=l.addingDoorman;return r.a.createElement(ne.a,{size:"lg",isOpen:n,toggle:s,centered:!0},r.a.createElement(me.a,null,r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-between"},r.a.createElement("h4",{className:"mb-0 text-white"},r.a.createElement("strong",null,"Add New Doorman")),r.a.createElement(I.a,{className:"border-0 bg-transparent p-0",onClick:s},r.a.createElement("img",{alt:"...",src:a(232),width:30,height:30}))),r.a.createElement(h.a,{className:"mt-5"},r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"FULL NAME")),r.a.createElement(w.a,{type:"text",placeholder:"Enter Name",value:c,onChange:function(t){return e.setState({name:t.target.value,nameErr:""})},invalid:!!m})),r.a.createElement(C.a,null,m)),r.a.createElement(f.a,{xs:"12",sm:"6",className:"mt-3 mt-sm-0"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"ROLE")),r.a.createElement(w.a,{type:"text",placeholder:"Enter Role",value:"Doorman",disabled:!0})))),r.a.createElement(h.a,{className:"mt-3 mt-sm-5"},r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"EMAIL")),r.a.createElement(w.a,{type:"email",placeholder:"Enter Email",value:d,onChange:function(t){return e.setState({email:t.target.value,emailErr:""})},invalid:!!u})),r.a.createElement(C.a,null,u)),r.a.createElement(f.a,{xs:"12",sm:"6",className:"mt-3 mt-sm-0"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"PHONE NUMBER")),r.a.createElement(w.a,{type:"tel",placeholder:"Enter Phone Number",value:p,onChange:function(t){return e.setState({phoneNumber:t.target.value,phoneNumberErr:""})},invalid:!!g})),r.a.createElement(C.a,null,g))),r.a.createElement(h.a,{className:"mt-3 mt-sm-5"},r.a.createElement(f.a,{xs:"12",sm:"6"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"PASSWORD")),r.a.createElement(w.a,{type:"password",placeholder:"Enter Password",value:b,onChange:function(t){return e.setState({password:t.target.value,emailErr:""})},invalid:!!E})),r.a.createElement(C.a,null,E)),r.a.createElement(f.a,{xs:"12",sm:"6",className:"mt-3 mt-sm-0"},r.a.createElement(y.a,null,r.a.createElement(Pe.a,null,r.a.createElement("strong",null,"CONFIRM PASSWORD")),r.a.createElement(w.a,{type:"password",placeholder:"Repeat Password",value:v,onChange:function(t){return e.setState({confirmPassword:t.target.value,phoneNumberErr:""})},invalid:!!N})),r.a.createElement(C.a,null,N))),i.message&&r.a.createElement(x.a,{color:i.type,className:"mt-4"},i.message),r.a.createElement("div",{className:"d-flex justify-content-end mt-5"},r.a.createElement(I.a,{className:"bg-white text-darkgray p-2",onClick:s},r.a.createElement("small",{style:{fontWeight:"bold"}},"CLOSE")),r.a.createElement(I.a,{className:"bg-blue text-white border-0 p-2 ml-3",loading:S,disabled:S,onClick:this.onAddDoorman},r.a.createElement("small",{style:{fontWeight:"bold"}},o?"EDIT DOORMAN":"ADD DOORMAN")))))}}]),n}(r.a.Component),bt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getDoormen=function(){if(n.props.user.id){var e={buildingId:n.props.user.buildingId,role:n.props.user.role};n.setState({isLoading:!0}),Q.getDoormen(e).then((function(e){n.setState({doormen:e.data.data,isLoading:!1})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t},isLoading:!1})}))}},n.onAddedDoorman=function(e){var t=n.state.doormen,a=F.a.findIndex(t,(function(t){return t.id===e.id}));-1!==a?t[a]=e:t=[e].concat(Object(m.a)(t)),n.setState({doormen:t,showAddDoormanModal:!1})},n.showConfirmCancelModal=function(e){n.setState({showConfirmCancelModal:!0,activeDoorman:e})},n.cancelDoorman=function(){var e=n.state.activeDoorman;if(e){var t={doormanId:e.id};n.setState({cancellingDoorman:!0}),Q.cancelDoorman(t).then((function(e){var t=e.data.data.doormanId,a=n.state.doormen;F.a.remove(a,(function(e){return e.id==t})),n.setState({doormen:a,showConfirmCancelModal:!1,cancellingDoorman:!1})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t},cancellingDoorman:!1})}))}},n.renderDoormen=function(){var e=n.state,t=e.doormen,a=e.isLoading;return r.a.createElement(ct.a,{active:a,spinner:!0},r.a.createElement(ot.a,null,F.a.map(t,(function(e){return r.a.createElement(lt.a,{key:e.id,className:"shadow-sm py-3 mt-3"},r.a.createElement(h.a,{className:"mx-0 bg-white"},r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"2",className:"px-1 px-sm-3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"NAME")),r.a.createElement("h6",{className:"mb-0"},e.name)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"3",className:"px-1 px-sm-3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"EMAIL")),r.a.createElement("h6",{className:"mb-0"},e.email)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"3",className:"mt-3 mt-sm-0 px-1 px-sm-3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"PHONE NUMBER")),r.a.createElement("h6",{className:"mb-0"},e.phoneNumber)),r.a.createElement(f.a,{xs:"6",sm:"auto",lg:"auto",className:"mt-3 mt-sm-0 px-1 px-sm-3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"ROLE")),r.a.createElement("h6",{className:"mb-0"},F.a.upperFirst(e.role))),r.a.createElement(f.a,{className:"d-flex justify-content-end align-items-center mt-3 mt-sm-0 px-1 px-sm-3"},r.a.createElement(I.a,{className:"bg-blue border-0 text-white",onClick:function(){return n.setState({activeDoorman:e,showAddDoormanModal:!0})}},"Edit"),r.a.createElement(I.a,{className:"bg-reject border-0 text-white ml-2",onClick:function(){return n.showConfirmCancelModal(e)}},"Cancel"))))}))))},n.state={alert:{type:"",message:""},isLoading:!1,showConfirmCancelModal:!1,cancellingDoorman:!1,doormen:[],activeDoorman:void 0},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getDoormen()}},{key:"render",value:function(){var e=this,t=this.state,a=t.alert,n=t.showAddDoormanModal,s=t.showConfirmCancelModal,o=t.cancellingDoorman,l=t.activeDoorman;return r.a.createElement("div",{className:"my-4 mx-2 mx-lg-5"},a.message&&r.a.createElement(x.a,{color:a.type},a.message),r.a.createElement("div",{className:"d-flex justify-content-end mb-4"},r.a.createElement(I.a,{className:"bg-accept border-0",onClick:function(){return e.setState({showAddDoormanModal:!0,activeDoorman:void 0})}},"+ Add New Doorman")),this.renderDoormen(),n&&r.a.createElement(ft,{isOpen:n,activeDoorman:l,buildingId:this.props.user.buildingId,toggle:function(){return e.setState({showAddDoormanModal:!1,activeDoorman:void 0})},onAddedDoorman:this.onAddedDoorman}),s&&r.a.createElement(Ye,{isOpen:s,title:"Cancel",body:"Are you sure to cancel this doorman?",inProgress:o,onClickPositive:this.cancelDoorman,onClickNegative:function(){return e.setState({showConfirmCancelModal:!1,activeDoorman:void 0})}}))}}]),a}(r.a.Component),Et=Object(l.b)((function(e){return{user:e.user}}))(bt),vt=a(863),yt=a(313),Nt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onOpened=function(){var e=n.props.activeApt;e&&n.setState({names:e.aptNames,aptColorHex:e.aptColorHex})},n.save=function(){var e=n.state,t=e.names,a=e.aptColorHex;if(t){var r={aptId:n.props.activeApt.id,aptNumber:n.props.activeApt.aptNumber,names:t,aptColorHex:a};n.setState({saving:!0}),Q.editApartment(r).then((function(e){n.setState({saving:!1}),n.props.onEditDone&&n.props.onEditDone(e.data.data)})).catch((function(e){n.setState({saving:!1})}))}else n.setState({namesErr:"Names cannot be empty"})},n.state={names:"",namesErr:"",aptColorHex:"",showColorPicker:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.toggle,s=this.state,o=s.names,l=s.namesErr,i=s.saving,c=s.showColorPicker,m=s.aptColorHex;return r.a.createElement(ne.a,{isOpen:a,toggle:n,onOpened:this.onOpened,centered:!0},r.a.createElement(We.a,null,"Assign names to apartment"),r.a.createElement(me.a,null,r.a.createElement("div",null,r.a.createElement(Pe.a,null,"Apartment Color"),r.a.createElement("div",{style:{width:40,height:25,backgroundColor:m,cursor:"pointer"},onClick:function(){return e.setState({showColorPicker:!0})}}),c&&r.a.createElement("div",{style:{positive:"absolute",zIndex:2}},r.a.createElement(yt.ChromePicker,{color:m,onChange:function(t){return e.setState({aptColorHex:t.hex})}}))),r.a.createElement(y.a,{className:"mt-2"},r.a.createElement(Pe.a,null,"Separate the names with comma(,)"),r.a.createElement(w.a,{type:"text",value:o,onChange:function(t){return e.setState({names:t.target.value})},invalid:!!l})),r.a.createElement(C.a,null,l)),r.a.createElement(Ae.a,null,r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(I.a,{className:"bg-white text-darkgray p-2",onClick:n},r.a.createElement("small",{style:{fontWeight:"bold"}},"CANCEL")),r.a.createElement(I.a,{className:"bg-blue text-white border-0 p-2 ml-3",loading:i,disabled:i,onClick:this.save},r.a.createElement("small",{style:{fontWeight:"bold"}},"SAVE")))))}}]),a}(r.a.Component),St=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getApartments=function(){var e={buildingId:n.props.user.buildingId};Q.getApartments(e).then((function(e){n.setState({apartments:e.data.data})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t}})}))},n.showConfirmCancelModal=function(e){n.setState({showConfirmCancelModal:!0,activeApt:e})},n.deleteApt=function(){var e=n.state.activeApt;if(e){n.setState({deletingApt:!0});var t={aptNumber:e.aptNumber};Q.deleteApartment(t).then((function(e){var t=e.data.data.aptNumber,a=n.state.apartments;a.length>0&&(F.a.remove(a,(function(e){return e.aptNumber==t})),n.setState({apartments:a,deletingApt:!1,showConfirmDeleteModal:!1,activeApt:void 0}))})).catch((function(e){n.setState({deletingApt:!1})}))}},n.onEditDone=function(e){var t=n.state.apartments,a=F.a.findIndex(t,(function(t){return t.id===e.aptId}));-1!==a&&(t[a].aptNames=e.aptNames,t[a].aptColorHex=e.aptColorHex),n.setState({apartments:t,showEditAptModal:!1})},n.renderApts=function(){var e=n.state.apartments;return r.a.createElement(ot.a,null,F.a.map(e,(function(e){return r.a.createElement(lt.a,{key:e.aptNumber,className:"mt-3 py-3 shadow-sm"},r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:"6",sm:"3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"Apartment #")),r.a.createElement("h6",{className:"mb-0"},e.aptNumber)),r.a.createElement(f.a,{xs:"6",sm:"3"},r.a.createElement("h6",null,r.a.createElement("strong",null,"Apartment Color")),r.a.createElement("div",{style:{width:40,height:25,backgroundColor:e.aptColorHex}})),r.a.createElement(f.a,{xs:"6",sm:"4",className:"mt-3 mt-md-0"},r.a.createElement("h6",null,r.a.createElement("strong",null,"Apartment Name")),r.a.createElement("h6",{className:"ml-2"},e.aptNames)),r.a.createElement(f.a,{xs:"6",sm:"2",className:"d-flex align-items-center justify-content-center mt-3 mt-md-0"},r.a.createElement(vt.a,{className:"bg-blue border-0",onClick:function(){return n.setState({showEditAptModal:!0,activeApt:e})}},"Edit"),r.a.createElement(vt.a,{className:"bg-reject border-0 ml-2",onClick:function(){return n.setState({showConfirmDeleteModal:!0,activeApt:e})}},"Cancel"))))})))},n.state={alert:{type:"",message:""},apartments:[],activeApt:void 0,showEditAptModal:!1,deletingApt:!1,showConfirmDeleteModal:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getApartments()}},{key:"render",value:function(){var e=this,t=this.props.className,a=this.state,n=a.showConfirmDeleteModal,s=a.showEditAptModal,o=a.activeApt,l=a.deletingApt;return r.a.createElement("div",{className:t||"my-5 mx-2 mx-lg-5"},this.renderApts(),s&&r.a.createElement(Nt,{isOpen:s,toggle:function(){return e.setState({showEditAptModal:!1,activeApt:void 0})},activeApt:o,onEditDone:this.onEditDone}),n&&r.a.createElement(Ye,{isOpen:n,title:"Cancel Apartment",body:"Are you sure to delete this apartment?",inProgress:l,onClickPositive:this.deleteApt,onClickNegative:function(){return e.setState({showConfirmDeleteModal:!1,activeApt:void 0})}}))}}]),a}(r.a.Component),kt=Object(l.b)((function(e){return{user:e.user}}))(St),wt=a(325),Ct=a(323),xt=(a(825),function(e){var t=e.className,a=e.onChange,n=e.value,s=Object(wt.a)(e,["className","onChange","value"]);return r.a.createElement(Ct.a,Object.assign({},s,{className:t,popupClassName:t,showSecond:!1,onChange:a,hideDisabledOptions:!0,minuteStep:15,value:n,use12Hours:!0,disabledHours:function(){return[0,1,2,3,4,5,6,7,22,23]},allowEmpty:!1,inputReadOnly:!0}))}),Ot=[{id:0,start:Be()("08:00","hh:mm"),end:Be()("09:00","hh:mm")}],It=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).onGetTimeSlots=function(){var e={buildingId:s.props.user.buildingId};Q.getTimeSlots(e).then((function(e){var t=e.data.data;if(0!==t.length){var a=[];F.a.forEach(t,(function(e){a.push({id:e.localId,start:Be()(e.start,"hh:mm"),end:Be()(e.end,"hh:mm")})})),s.setState({timeSlots:a})}})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),s.setState({alert:{type:"danger",message:t}})}))},s.disabledHours=function(){return[0,1,2,3,4,5,6,7,22,23]},s.onChangeStartTime=function(e,t){var a=Object(m.a)(s.state.timeSlots),n=a.findIndex((function(t){return t.id===e})),r=Object(T.a)({},a[n]);r.start=t,a[n]=r,s.setState({timeSlots:a})},s.onChangeEndTime=function(e,t){var a=Object(m.a)(s.state.timeSlots),n=a.findIndex((function(t){return t.id===e})),r=Object(T.a)({},a[n]);r.end=t,a[n]=r,s.setState({timeSlots:a})},s.onChangeBookingLimit=function(e){var t=e.target.value,a={bookingDateLimit:t,userId:s.props.user.id};Q.saveBookDateLimit(a).then((function(e){s.setState({bookingDateLimit:t}),s.props.updateUser(Object(T.a)({},s.props.user,{booking_limit:t}))}))},s.addNewTimeSlot=function(e){var t=s.state.timeSlots;if(t.length>0){var a=t[t.length-1];if(a.start.isSame(a.end)||a.start.isAfter(a.end))return void s.setState({alert:{type:"danger",message:"Invalid time range"}});if(t.length>1)if(t[t.length-2].end.isAfter(a.start))return void s.setState({alert:{type:"danger",message:"Invalid time range"}});a.end.isValid()&&(s.setState({alert:{type:"danger",message:""}}),s.setState({timeSlots:[].concat(Object(m.a)(s.state.timeSlots),[{id:a.id+1,start:a.end,end:a.end}])}))}},s.removeLastTimeSlot=function(e){s.setState({timeSlots:s.state.timeSlots.filter((function(t){return t.id!==e}))})},s.onRenderTimeSlots=function(){var e=s.state.timeSlots;return F.a.map(e,(function(t){return r.a.createElement("div",{className:"mt-2",key:t.id},r.a.createElement(xt,{className:"timepicker",disabled:t.id!==e.length-1,value:t.start,onChange:function(e){return s.onChangeStartTime(t.id,e)}}),"\xa0 - \xa0",r.a.createElement(xt,{className:"timepicker",disabled:t.id!==e.length-1,value:t.end,onChange:function(e){return s.onChangeEndTime(t.id,e)}}),t.id===e.length-1&&r.a.createElement("img",{alt:"...",style:{cursor:"pointer"},src:a(826),width:20,height:20,className:"ml-4",onClick:function(){return s.addNewTimeSlot(t.id)}}),t.id===e.length-1&&0!==t.id&&r.a.createElement("img",{alt:"...",style:{cursor:"pointer"},src:a(827),width:20,height:20,className:"ml-2",onClick:function(){return s.removeLastTimeSlot(t.id)}}))}))},s.onSaveTimeSlots=function(){var e=s.state.timeSlots;if(e.length<3)s.setState({alert:{type:"danger",message:"Add atleast 3 timeslots"}});else{var t=[];F.a.forEach(e,(function(e){e.start.isAfter(e.end)?s.setState({alert:{type:"danger",message:"Invalid time range"}}):t.push({id:e.id,start:e.start.format("HH:mm"),end:e.end.format("HH:mm")})}));var a={buildingId:s.props.user.buildingId,timeSlots:t};console.log(a),Q.saveTimeSlots(a).then((function(e){s.setState({alert:{type:"success",message:"Saved"}})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),s.setState({alert:{type:"danger",message:t}})}))}},s.state={bookingDateLimit:"7",timeSlots:Ot,alert:{type:"",message:""}},s.onSaveTimeSlots=s.onSaveTimeSlots.bind(Object(xe.a)(s)),s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.user.booking_limit&&this.setState({bookingDateLimit:this.props.user.booking_limit}),this.onGetTimeSlots()}},{key:"render",value:function(){var e=this.state,t=e.bookingDateLimit,a=e.alert;return r.a.createElement("div",{className:"d-flex flex-column my-4 mx-2 mx-lg-5"},r.a.createElement(b.a,{className:"shadow-sm px-4 py-4 mt-5"},r.a.createElement("h6",{className:"text-darkgray"},r.a.createElement("strong",null,"SET BOOKING DATE LIMIT")),r.a.createElement(w.a,{type:"select",className:"col-lg-3 col-md-6",value:t,onChange:this.onChangeBookingLimit},r.a.createElement("option",{key:7,value:7},"1 week"),r.a.createElement("option",{key:14,value:14},"2 weeks"))),r.a.createElement("h6",{className:"text-darkgray mt-4"},r.a.createElement("strong",null,"TIME SLOT")),r.a.createElement(b.a,{className:"shadow-sm px-3 py-4"},r.a.createElement("div",{className:"col-lg-6 col-md-10"},this.onRenderTimeSlots()),r.a.createElement("div",{style:{textAlign:"center"}},a.message&&r.a.createElement(x.a,{color:a.type,className:"mt-3"},a.message),r.a.createElement(I.a,{className:"bg-blue border-0 shadow-sm mt-4",onClick:this.onSaveTimeSlots},"SAVE"))),r.a.createElement("h6",{className:"mt-5"},"Tap\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.topazsystems.com/software/sigweb.exe"},"here"),"\xa0to download the driver of Topaz Sign pad"))}}]),n}(r.a.Component),Dt=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(oe(t))}}}))(It),Mt=a(318),jt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onMonthlySelect=function(){"monthly"!==n.state.plan&&n.setState({changePlan:"monthly",showUpgradeConfirmModal:!0})},n.onQuarterlySelect=function(){"quarterly"!==n.state.plan&&n.setState({changePlan:"quarterly",showUpgradeConfirmModal:!0})},n.onBiYearlySelect=function(){"biyearly"!==n.state.plan&&n.setState({changePlan:"biyearly",showUpgradeConfirmModal:!0})},n.upgradePlan=function(){n.setState({upgradingPlan:!0});var e={userId:n.props.user.id,plan:n.state.changePlan};Q.updateStripeSubscription(e).then((function(t){n.setState({upgradingPlan:!1,showUpgradeConfirmModal:!1,plan:e.plan}),n.props.updateUser(Object(T.a)({},n.props.user,{subscribedPlan:e.plan}))})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),n.setState({alert:{type:"danger",message:t},upgradingPlan:!1})}))},n.state={showUpgradeConfirmModal:!1,upgradingPlan:!1,plan:"monthly",changePlan:"",monthly_price:0,monthly_save:0,quarterly_price:0,quarterly_save:0,biyearly_price:0,biyearly_save:0},n.onGetSubscriptionOptions(),n}return Object(u.a)(a,[{key:"onGetSubscriptionOptions",value:function(){var e=this,t=this.props.user.subscribedPlan;Q.getSubscriptionOptions().then((function(a){var n=a.data.data;e.setState({monthly_price:n.monthly_price,quarterly_price:n.quarterly_price,biyearly_price:n.biyearly_price,monthly_save:n.monthly_save,quarterly_save:n.quarterly_save,biyearly_save:n.biyearly_save,plan:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.monthly_price,n=t.monthly_save,s=t.quarterly_price,o=t.quarterly_save,l=t.biyearly_price,i=t.biyearly_save,c=t.plan,m=t.showUpgradeConfirmModal,d=t.upgradingPlan,u=t.changePlan,p={borderColor:"#0087B4",borderWidth:3},g={fontSize:25,fontWeight:"bold"},b={fontSize:70,fontWeight:"bold"};return r.a.createElement("div",{className:"d-flex flex-column my-4 mx-lg-5"},r.a.createElement("div",{className:"bg-white border-0 rounded shadow-sm mt-3"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"mt-lg-5 w-90",style:{height:2,backgroundColor:"lightgrey",opacity:.5}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(h.a,{className:"w-90 mt-lg-5 mb-lg-5"},r.a.createElement(f.a,{lg:"4",style:{textAlign:"center",color:"#0087B4"}},r.a.createElement("p",{style:g},"Monthly"),r.a.createElement("p",{style:b},"$",a),0!==n&&r.a.createElement("p",{style:b},"Save $",n),r.a.createElement(I.a,{className:"monthly"===c?"bg-tint":"bg-white blue-tint",style:p,onClick:this.onMonthlySelect},r.a.createElement("strong",{style:{fontSize:25}},"monthly"===c?"Current Plan":"Choose Plan"))),r.a.createElement(f.a,{lg:"4",style:{textAlign:"center",color:"#0087B4"}},r.a.createElement("p",{style:g},"Quarterly"),r.a.createElement("p",{style:b},"$",s),0!==o&&r.a.createElement("p",{style:b},"Save $",o),r.a.createElement(I.a,{className:"quarterly"===c?"bg-tint":"bg-white blue-tint",style:p,onClick:this.onQuarterlySelect},r.a.createElement("strong",{style:{fontSize:25}},"quarterly"===c?"Current Plan":"Choose Plan"))),r.a.createElement(f.a,{lg:"4",style:{textAlign:"center",color:"#0087B4"}},r.a.createElement("p",{style:g},"Bi Yearly"),r.a.createElement("p",{style:b},"$",l),0!==i&&r.a.createElement("p",{style:b},"Save $",i),r.a.createElement(I.a,{className:"biyearly"===c?"bg-tint":"bg-white blue-tint",style:p,onClick:this.onBiYearlySelect},r.a.createElement("strong",{style:{fontSize:25}},"biyearly"===c?"Current Plan":"Choose Plan")))))),m&&r.a.createElement(Ye,{isOpen:m,title:"Upgrade Plan",body:r.a.createElement("h6",{className:"f-family-poppins-lt",style:{lineHeight:1.5}},"Are you sure to change to ",r.a.createElement("strong",null,"monthly"===u?"Monthly":"quarterly"===u?"Quarterly":"Bi Yearly")," plan?"),inProgress:d,onClickPositive:this.upgradePlan,onClickNegative:function(){return e.setState({showUpgradeConfirmModal:!1})}}))}}]),a}(r.a.Component),Bt=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(Object(Mt.updateUser)(t))}}}))(jt),Tt=["Calendar","Registrations","Bookings","Apartments","Doormen","Setting"],Pt=["Calendar","Bookings"],At=["Calendar","Bookings","Subscription"],Rt=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getUserInfo=function(){return new Promise((function(e,t){Q.getUserInfo().then((function(t){e(t.data.data)})).catch((function(e){t(e)}))}))},n.onSignout=function(){Q.userSignout().then((function(e){e.data.success&&(U.a.set("isLoggedIn",!1),U.a.set("lastLoggedInAt",null),U.a.set("refreshToken",null),n.props.updateUser({id:0,name:void 0,email:void 0,phoneNumber:void 0,aptNumber:void 0,role:void 0,confirmed:0,createdAt:void 0}),n.props.history.push("/sign-in"))})).catch((function(e){console.log(e)}))},n.state={isLoggedIn:!0,activeMenu:"Calendar",isOpenPopover:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getUserInfo().then((function(t){e.props.updateUser(t)})).catch((function(t){e.setState({isLoggedIn:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeMenu,n=t.isLoggedIn,s=t.isOpenPopover,o=this.props.user;return n?r.a.createElement("div",{className:"d-flex flex-column flex-fill bg-secondary"},r.a.createElement(ve,{isOpenPopover:s,showPopover:function(){return e.setState({isOpenPopover:!0})},togglePopover:function(){return e.setState({isOpenPopover:!1})},onSignout:this.onSignout}),r.a.createElement(Ce,{className:"mt-3 mt-lg-5",onClick:function(){return e.setState({isOpenPopover:!1})},menus:o&&"admin"===o.role?Tt:o&&"doorman"===o.role?Pt:At,activeMenu:a,onChangeMenu:function(t){return e.setState({activeMenu:t})}}),r.a.createElement("div",{onClick:function(){return e.setState({isOpenPopover:!1})}},"Calendar"===a&&r.a.createElement(st,null),"Registrations"===a&&r.a.createElement(dt,null),"Bookings"===a&&r.a.createElement(ht,null),"Apartments"===a&&r.a.createElement(kt,null),"Doormen"===a&&r.a.createElement(Et,null),"Setting"===a&&r.a.createElement(Dt,null),"Subscription"===a&&r.a.createElement(Bt,null))):r.a.createElement(c.a,{to:{pathname:"sign-in"}})}}]),a}(r.a.Component),_t=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(oe(t))}}}))(Rt),Lt=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).resetPassword=function(){console.log("Reset password");var e=a.state,t=e.password,n=e.confirmPassword;if(t)if(n)if(t===n)if(t.length<5)a.setState({passwordError:"New password must be at least 5 characters"});else{var r=a.props.match.params.id,s=a.props.match.params.token;a.setState({sending:!0}),Q.storePassword({userId:r,token:s,password:t}).then((function(e){a.setState({sending:!1}),a.props.history.push("/sign-in")})).catch((function(e){var t;t=e.response?e.response.data.message:e.message,a.setState({sending:!1,alert:{type:"danger",message:t}})}))}else a.setState({confirmPasswordError:"Confirm password must match with new password"});else a.setState({confirmPasswordError:"Confirm password field cannot be empty"});else a.setState({passwordError:"New password field cannot be empty"})},a.state={alert:{type:"",message:""},password:"",passwordError:"",confirmPassword:"",confirmPasswordError:"",sending:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.alert,s=t.password,o=t.passwordError,l=t.confirmPassword,i=t.confirmPasswordError,c=t.sending;return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(h.a,{className:"d-flex flex-fill"},r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill justify-content-center"},r.a.createElement("img",{alt:"...",src:a(99),className:"login-left-img"})),r.a.createElement(f.a,{xs:"12",lg:"6",className:"d-flex flex-column flex-fill align-items-center justify-content-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400}),r.a.createElement(b.a,{className:"d-flex flex-column align-items-center border-1 bg-white mt-4 "+(ee.isMobile?"w-90":"w-75")},r.a.createElement("h4",{className:"blue-tint text-bold mt-3"},"Reset Password"),r.a.createElement("h5",{className:"blue-tint mt-1"},"Please input your new password"),r.a.createElement(v.a,{className:"w-90 mt-4"},r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(90),width:20,height:20}))),r.a.createElement(w.a,{type:"password",placeholder:"Enter your password",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:s,onChange:function(t){return e.setState({password:t.target.value,passwordError:""})},invalid:!!o}))),r.a.createElement(C.a,null,o),r.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},r.a.createElement(N.a,null,r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(k.a,{className:"bg-white border-top-0 border-left-0 border-right-0 rounded-0"},r.a.createElement("img",{alt:"...",src:a(90),width:20,height:20}))),r.a.createElement(w.a,{type:"password",placeholder:"Enter your confirm password",className:"border-top-0 border-left-0 border-right-0 rounded-0",value:l,onChange:function(t){return e.setState({confirmPassword:t.target.value,confirmPasswordError:""})},invalid:!!i}))),r.a.createElement(C.a,null,i)),n.message&&r.a.createElement(x.a,{color:n.type},n.message),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 my-4 py-2",onClick:this.resetPassword,loading:c,disabled:c},r.a.createElement("span",{className:"nav-link-inner--text ml-1 f-family-poppins"},"Reset Password"))))),r.a.createElement("img",{alt:"...",src:a(100),className:"login-right-img"}))}}]),n}(r.a.Component),Ut=a(96),Vt={style:{base:{color:"#32325d",fontFamily:"Poppins",fontSize:"16px",fontWeight:400,fontSmoothing:"antialiased","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},Ht=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.stripe;return r.a.createElement("div",{style:{border:"1px solid #B6B6BA"},className:"px-4 py-2 shadow-sm mt-3 mb-3"},r.a.createElement(Ut.CardElement,{options:Vt,onReady:function(a){return e.props.onCardElementReady(t,a)}}))}}]),a}(r.a.Component),Wt=function(e){var t=e.onCardElementReady;return r.a.createElement(Ut.ElementsConsumer,null,(function(e){var a=e.elements,n=e.stripe;return r.a.createElement(Ht,{elements:a,stripe:n,onCardElementReady:t})}))},Yt=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={checked:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,s=t.onClose,o=this.state.checked;return r.a.createElement(ne.a,{isOpen:n,centered:!0},r.a.createElement(me.a,{className:"d-flex flex-column align-items-center"},r.a.createElement("img",{alt:"...",src:a(35),width:400,className:"mt-5 mb-5"}),r.a.createElement("img",{alt:"...",src:a(141),width:150,height:150,className:"my-5"}),r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Thank you for registering, you will be notified"),r.a.createElement("p",null,"once your registration is approved, you will"),r.a.createElement("p",null,"then be able to login and start scheduling!")),r.a.createElement("div",{className:"d-flex flex-fill mt-4"},r.a.createElement(D.Checkbox,{theme:"bootstrap-checkbox",value:o,onChange:function(){return e.setState({checked:!e.state.checked})},children:r.a.createElement("span",null)}),r.a.createElement("h6",{className:"ml-2 text-darkgray",style:{cursor:"pointer"},onClick:function(){return e.setState({checked:!e.state.checked})}},"I understand")),r.a.createElement(I.a,{className:"bg-blue text-white border-0 w-90 my-4 py-2",onClick:s,disabled:!o},r.a.createElement("strong",null,"OK"))))}}]),n}(r.a.Component),Ft=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handlePaymentThatRequiresCustomerAction=function(e){var t=e.subscription,n=e.invoice,r=e.priceId,s=e.stripeCustomerId,o=e.paymentMethodId,l=e.plan,i=e.isRetry;if(t&&"active"===t.status)return{subscription:t,priceId:r,paymentMethodId:o,plan:l,stripeCustomerId:s};console.log("Invoice: ",n);var c=n?n.payment_intent:t.latest_invoice.payment_intent;return"requires_action"===c.status||!0===i&&"requires_payment_method"===c.status?a.state.stripe.confirmCardPayment(c.client_secret,{payment_method:o}).then((function(e){if(e.error)throw new Error(e.error.message);if("succeeded"===e.paymentIntent.status)return{priceId:r,subscription:t,invoice:n,paymentMethodId:o,plan:l,stripeCustomerId:s}})).catch((function(e){throw e})):{subscription:t,priceId:r,paymentMethodId:o,stripeCustomerId:s,plan:l}},a.handleRequiresPaymentMethod=function(e){var t=e.subscription,a=e.paymentMethodId,n=e.priceId,r=e.plan,s=e.stripeCustomerId;if(console.log("Handle requires payment method"),t&&"active"===t.status)return{subscription:t,priceId:n,paymentMethodId:a,plan:r,stripeCustomerId:s};if("requires_payment_method"===t.latest_invoice.payment_intent.status)throw U.a.set("latestStripeCustomerId",s),U.a.set("latestPlan",r),U.a.set("latestPriceId",n),U.a.set("latestInvoiceId",t.latest_invoice.id),U.a.set("latestInvoicePaymentIntentStatus",t.latest_invoice.payment_intent.status),new Error("Your card was declined");return{subscription:t,priceId:n,paymentMethodId:a,plan:r,stripeCustomerId:s}},a.retryInvoiceWithNewPaymentMethod=function(e){var t=e.stripeCustomerId,n=e.paymentMethodId,r=e.invoiceId,s=e.priceId,o=e.plan,l={stripeCustomerId:t,paymentMethodId:n,invoiceId:r};Q.retrySubscriptionInvoice(l).then((function(e){return console.log("Retry subscription: ",e.data),{invoice:e.data.data,stripeCustomerId:t,paymentMethodId:n,priceId:s,plan:o,isRetry:!0}})).then(a.handlePaymentThatRequiresCustomerAction).then(a.onSubscriptionComplete).catch((function(e){a.setState({alert:{type:"danger",message:e.message},subscribing:!1})}))},a.onSubscriptionComplete=function(e){var t=a.props.location.state.userId;if(a.setState({subscribing:!1}),U.a.set("latestStripeCustomerId",null),U.a.set("latestPlan",null),U.a.set("latestPriceId",null),U.a.set("latestInvoiceId",null),U.a.set("latestInvoicePaymentIntentStatus",null),e.subscription&&"active"===e.subscription.status){var n={userId:t,stripeCustomerId:e.stripeCustomerId,subscriptionId:e.subscription.id,plan:e.plan};Q.updateSubscriptionStatus(n).then((function(e){a.setState({doneSubscribe:!0})})).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({alert:{type:"danger",message:t},subscribing:!1})}))}},a.onConfirm=Object(B.a)(j.a.mark((function e(){var t,n,r,s,o,l,i,c,m,d,u,p,g,h,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.stripe,r=t.cardElement,s=t.plan,n&&r){e.next=3;break}return e.abrupt("return");case 3:return a.setState({subscribing:!0,alert:{type:"",message:""}}),o=U.a.get("latestInvoicePaymentIntentStatus"),l=U.a.get("latestStripeCustomerId"),i=U.a.get("latestPlan"),e.next=9,n.createPaymentMethod({type:"card",card:r});case 9:c=e.sent,m=c.error,d=c.paymentMethod,m?(a.setState({subscribing:!1,alert:{type:"danger",message:m.message}}),console.log("Create Payment method error: ",m)):(u=d.id,p=a.props.location.state.stripeCustomerId,l===p&&i===s&&"requires_payment_method"===o?(g=U.a.get("latestInvoiceId"),h=U.a.get("latestPriceId"),console.log("Retry last invoice : ",g),a.retryInvoiceWithNewPaymentMethod({stripeCustomerId:p,paymentMethodId:u,invoiceId:g,priceId:h})):(f={stripeCustomerId:p,plan:s,paymentMethodId:u},Q.createStripeSubscription(f).then((function(e){var t=e.data.data;return{paymentMethodId:u,priceId:t.items.data[0].price.id,stripeCustomerId:f.stripeCustomerId,plan:s,subscription:t}})).then(a.handlePaymentThatRequiresCustomerAction).then(a.handleRequiresPaymentMethod).then(a.onSubscriptionComplete).catch((function(e){var t=e.message;e.response&&(t=e.response.data.message),a.setState({alert:{type:"danger",message:t},subscribing:!1})}))));case 13:case"end":return e.stop()}}),e)}))),a.onCardElementReady=function(e,t){a.setState({stripe:e,cardElement:t})},a.state={plan:"monthly",payment_method:"card",monthly_price:0,quarterly_price:0,biyearly_price:0,stripe:void 0,cardElement:void 0,subscribing:!1,alert:{type:"",message:""},doneSubscribe:!1},a.onGetSubscriptionOptions(),a}return Object(u.a)(n,[{key:"onGetSubscriptionOptions",value:function(){var e=this;Q.getSubscriptionOptions().then((function(t){var a=t.data.data;e.setState({monthly_price:a.monthly_price,quarterly_price:a.quarterly_price,biyearly_price:a.biyearly_price})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.plan,s=t.payment_method,o=t.monthly_price,l=t.quarterly_price,i=t.biyearly_price,c=t.alert,m=t.subscribing,d=t.doneSubscribe,u={float:"right",color:"#364954",fontWeight:"bold",fontSize:18},p={border:"1px solid #B6B6BA"},g={border:"2px solid #45BCEC"};return r.a.createElement("div",{className:"d-flex flex-column flex-fill align-items-center justify-content-center px-lg-4"},r.a.createElement("img",{alt:"...",src:a(829),className:"stripe-subscription-left-img"}),r.a.createElement("img",{alt:"...",src:a(830),className:"stripe-subscription-right-img"}),r.a.createElement("img",{alt:"...",src:a(35),width:350,className:"my-5"}),r.a.createElement("div",{className:"col-lg-6 col-10 border-1 px-lg-5",style:{border:"0.7px solid rgb(50, 75, 77, 0.7)",background:"rgb(255, 255, 255, 0.8)"}},r.a.createElement("h6",{className:"mt-5",style:{fontWeight:"bold"}},"Choose Plan"),r.a.createElement(y.a,{className:"mt-4"},r.a.createElement("div",{style:0===n?g:p,className:"px-4 py-2 shadow-sm"},r.a.createElement("input",{type:"radio",name:"plan",className:"mr-4",checked:"monthly"===n,onChange:function(t){return e.setState({plan:"monthly"})}}),r.a.createElement("label",{className:"mb-0"},"Monthly"),r.a.createElement("label",{style:u},"$",o)),r.a.createElement("div",{style:1===n?g:p,className:"px-4 py-2 mt-3 shadow-sm"},r.a.createElement("input",{type:"radio",name:"plan",className:"mr-4",checked:"quarterly"===n,onChange:function(t){return e.setState({plan:"quarterly"})}}),r.a.createElement("label",{className:"mb-0"},"Quarterly"),r.a.createElement("label",{style:u},"$",l)),r.a.createElement("div",{style:2===n?g:p,className:"px-4 py-2 mt-3 shadow-sm"},r.a.createElement("input",{type:"radio",name:"plan",className:"mr-4",checked:"biyearly"===n,onChange:function(t){return e.setState({plan:"biyearly"})}}),r.a.createElement("label",{className:"mb-0"},"Bi-Yearly"),r.a.createElement("label",{style:u},"$",i))),r.a.createElement("hr",{className:"my-5",style:{color:"##E8E8EA"}}),r.a.createElement("h6",{style:{fontWeight:"bold"}},"Choose payment method"),r.a.createElement(h.a,{className:"mt-4"},r.a.createElement(f.a,{lg:"6",sm:"6",style:{textAlign:"center"}},r.a.createElement("img",{alt:"...",src:a(831),height:25}),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"method",className:"mr-2",checked:"card"===s,onChange:function(t){return e.setState({payment_method:"card"})}}),r.a.createElement("label",{className:"mb-0"},"Credit Card"))),r.a.createElement(f.a,{lg:"6",sm:"6",style:{textAlign:"center"}},r.a.createElement("img",{alt:"...",src:a(832),height:25}),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"method",className:"mr-2",checked:"paypal"===s,onChange:function(t){return e.setState({payment_method:"paypal"})}}),r.a.createElement("label",{className:"mb-0"},"Paypal")))),"card"===s&&r.a.createElement(Wt,{onCardElementReady:this.onCardElementReady}),c.message&&r.a.createElement(x.a,{color:c.type,className:"mt-3"},c.message),r.a.createElement(I.a,{type:"submit",className:"bg-blue text-white border-0 w-100 mt-3 mb-5",onClick:this.onConfirm,loading:m,disabled:m},r.a.createElement("strong",null,"CONFIRM"))),d&&r.a.createElement(Yt,{isOpen:d,onClose:function(){return e.setState({doneSubscribe:!1},(function(){return e.props.history.push("/sign-in")}))}}))}}]),n}(r.a.Component),qt=a(319),zt=a.n(qt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gt=a(44),Kt=(a(320),a(198)),$t=a(321),Jt=a.n($t),Qt=a(866),Xt={id:0,name:void 0,email:void 0,phoneNumber:void 0,aptNumber:void 0,aptColorHex:void 0,buildingName:void 0,buildingId:void 0,registrationCapacity:void 0,role:void 0,confirmed:0,phone_verify:0,stripeCustomerId:void 0,subscriptionId:void 0,subscribedPlan:void 0,subscribedAt:void 0,booking_limit:void 0,createdAt:void 0},Zt=Object(Qt.a)({updateUser:function(e,t){return Object(T.a)({},e,{},t.payload)}},Xt);var ea=a(322),ta=function(){var e=[!1].filter(Boolean),t=[Gt.a.apply(void 0,Object(m.a)(e))],a=Gt.d.apply(void 0,t),n=Object(Gt.c)({user:Zt}),r={key:"740_gym",storage:Jt.a},s=Object(Kt.a)(r,n),o=Object(Gt.e)(s,void 0,a);return{store:o,persistor:Object(Kt.b)(o)}}(),aa=ta.store,na=ta.persistor,ra=Object(ea.a)("pk_test_51HiAlsD4eoVJD4iBXmUi7zetFEPJqfWLgOyYKGLrIvnCKcqtT8qgKsCh62va726wNv2GAghAyjgPpetKJeXu9FkA00MS3li0aK"),sa=document.getElementById("root"),oa=r.a.createElement(Ut.Elements,{stripe:ra,options:{fonts:[{cssSrc:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap"}]}},r.a.createElement(l.a,{store:aa},r.a.createElement(i.a,{loading:null,persistor:na},r.a.createElement(zt.a,null,r.a.createElement(c.c,{history:W},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",exact:!0,component:he}),r.a.createElement(c.b,{path:"/sign-up",exact:!0,component:ae}),r.a.createElement(c.b,{path:"/sign-in",exact:!0,component:ie}),r.a.createElement(c.b,{path:"/forgot-password",exact:!0,component:fe}),r.a.createElement(c.b,{path:"/dashboard",exact:!0,component:_t}),r.a.createElement(c.b,{path:"/reset/:id/:token",exact:!0,render:function(e){return r.a.createElement(Lt,e)}}),r.a.createElement(c.b,{path:"/signup-phone-confirm",exact:!0,component:ue}),r.a.createElement(c.b,{path:"/signin-phone-confirm",exact:!0,component:ge}),r.a.createElement(c.b,{path:"/signup-subscription",exact:!0,component:Ft}),r.a.createElement(c.a,{to:"/"})))))));sa.hasChildNodes()?o.a.hydrate(oa,sa):o.a.render(oa,sa),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,a){e.exports=a.p+"static/media/padlock.698a28fd.svg"},99:function(e,t,a){e.exports=a.p+"static/media/login-left.976638d7.png"}},[[328,1,2]]]);
//# sourceMappingURL=main.e3b10074.chunk.js.map